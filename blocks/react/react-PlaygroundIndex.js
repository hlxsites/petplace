import{r as y,i as Y,j as n,I as z,B as T,c as J,S as $,a as K,b as U,d as H,e as X,l as Q,T as w,u as Z}from"./react-index.js";function ee(t,e){return y.useEffect(t,ne(e))}function ne(t){const e=y.useRef(t),i=y.useRef(0);return Y(t,e.current)||(e.current=t,i.current+=1),y.useMemo(()=>e.current,[i.current])}const re=({id:t,onChange:e,value:i,...p})=>{const a=r=>d=>{d.preventDefault(),i!==r&&(e==null||e(r))};return n.jsx(z,{id:t,...p,children:({inputProps:r})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex h-12",children:[n.jsx(T,{className:"rounded-lg rounded-br-none rounded-tr-none",onClick:a(!1),variant:i?"secondary":"primary",children:"No"}),n.jsx(T,{className:"rounded-lg rounded-bl-none rounded-tl-none",onClick:a(!0),variant:i?"primary":"secondary",children:"Yes"})]}),n.jsx("input",{className:"sr-only",defaultChecked:!!i,id:t,onChange:()=>{e==null||e(!i)},name:t,type:"checkbox",...r})]})})},D=window.location.hostname==="localhost",te=({schema:t,onChange:e,onSubmit:i,values:p})=>{const a=y.useRef(p||{}),[r,d]=y.useState(p||{}),[S,N]=y.useState(!1),I=[],v=I.some(o=>!!o.errorMessage);return ee(()=>{e&&!Q.isEqual(a.current,r)&&e(r)},[e,r]),n.jsx("div",{className:"bg-background p-8 m-auto max-w-screen-lg",children:n.jsx("form",{id:t.id,noValidate:!0,onSubmit:B,children:n.jsx("div",{className:"space-y-large",children:t.children.map(E)})})});function B(o){return v?(o.preventDefault(),N(!0),null):(N(!0),i&&i({event:o,values:r}),r)}function E(o){if(!g(o.shouldDisplay??!0))return null;switch(o.elementType){case"section":return n.jsx(y.Fragment,{children:R(o)},o.id);case"html":return n.jsx(y.Fragment,{children:o.content},o.id);case"row":return n.jsx("div",{className:J("flg:flex-row gap-base lg:flex [&>*]:grow [&>*]:basis-0",o.className),children:o.children.map(E)},o.id);case"button":return n.jsx(T,{className:o.className,type:o.type,children:o.label},o.id);case"input":return n.jsx(y.Fragment,{children:A(o)},o.id);default:if(D)throw new Error(`Unsupported element type: ${o.elementType}`);return null}}function A({disabledCondition:o,requiredCondition:s,shouldDisplay:u,...l}){if(!g(u??!0))return null;const h=g(o??!1),j=g(s??!1),{id:c,type:x}=l,b={disabled:h,required:j,...l},_=S?G(b):null;if(b.errorMessage=_||void 0,I.push({...b}),x==="select"){const{options:f}=l;return n.jsx($,{...b,onChange:m=>{d(W=>({...W,[c]:m}))},options:f,value:(r==null?void 0:r[c])||""})}if(x==="radio")return n.jsx(K,{...b,onChange:f=>{d(m=>({...m,[c]:f}))},options:l.options||[],value:(r==null?void 0:r[c])||""});if(x==="checkboxGroup")return n.jsx(U,{...b,onChange:f=>{d(m=>({...m,[c]:f}))},options:l.options||[],value:(r==null?void 0:r[c])||[]});if(x==="boolean")return n.jsx(re,{...b,onChange:f=>{d(m=>({...m,[c]:f}))},value:typeof(r==null?void 0:r[c])<"u"?!!(r!=null&&r[c]):void 0});if(x==="textarea")return n.jsx(H,{...b,onChange:f=>{d(m=>({...m,[c]:f}))},value:(r==null?void 0:r[c])||""});if(x==="text"||x==="number")return n.jsx(X,{...b,onChange:f=>{d(m=>({...m,[c]:f}))},value:(r==null?void 0:r[c])||"",type:x});if(D)throw new Error(`Unsupported input type: ${x}`);return null}function R({children:o,description:s,id:u,shouldDisplay:l,title:h}){if(g(l||!0))return n.jsxs("section",{className:"my-small",id:u,children:[!!h&&n.jsx("h2",{className:"text-h2",children:h}),!!s&&n.jsx("p",{className:"text-lg text-muted-foreground",children:s}),n.jsx("div",{className:"mt-xsmall space-y-xsmall",children:o.map(E)})]})}function g(o){if(typeof o=="boolean")return o;if("type"in o)return O(o);const{operator:s,conditions:u}=o;return s==="and"?u.every(g):s==="or"?u.some(g):!1}function O({inputId:o,value:s,type:u}){const l=r==null?void 0:r[o];if(u==="contains")return typeof l!="string"?(console.warn('"contains" condition can only be used for strings'),!1):l.includes(s);if(u==="regex"){if(typeof l!="string"||typeof s!="string")return console.warn('"regex" condition can only be used for strings'),!1;try{return new RegExp(s).test(l)}catch{return console.warn('Invalid regex pattern for "regex" condition'),!1}}if(u==="exists")return!!l;if(u==="null")return!l;if(u==="=")return l===s;if(u==="!=")return l!==s;if(["<",">","<=",">="].includes(u)){if(l===void 0||s===void 0)return!1;const h=(j,c)=>u==="<"?j<c:u===">"?j>c:u==="<="?j<=c:u===">="?j>=c:!1;if(typeof l=="number"&&typeof s=="number")return h(l,s);if(l instanceof Date&&s instanceof Date)return h(l.getTime(),s.getTime());console.warn("Cannot compare non-numeric/non-date values for numeric/date operation")}return!1}function G(o){if(o.disabled)return null;const{errorMessage:s,required:u,type:l}=o;return u&&!L(o)?s||(["radio","select"].includes(l)?"Select an option":l==="checkboxGroup"?"Select at least one option":l==="boolean"?"Answer yes or no":"Fill this field"):null}function L({id:o}){const s=r==null?void 0:r[o];return typeof s>"u"?!1:Array.isArray(s)||typeof s=="string"?!!s.length:!0}},P=/{{(.*?)\|.*?}}/;function oe(t,e){if(!e)return t;const i=p=>{const a={...p};if("children"in a)a.children=a.children.map(i);else if("options"in a&&a.optionsType==="dynamic"&&typeof a.options=="string"&&P.test(a.options)){const[r]=V(a.options),d=F(r,e);a.options=d}return"disabledCondition"in a&&C(a.disabledCondition,e),"requiredCondition"in a&&C(a.requiredCondition,e),C(a.shouldDisplay,e),a};return{...t,children:t.children.map(i)}}function ie(t,e){if(!(t.valueType==="dynamic"&&P.test(t.value)))return;const[p]=V(t.value),a=F(p,e);t.value=a}function C(t,e){!t||typeof t=="boolean"||("type"in t?ie(t,e):"conditions"in t&&t.conditions.forEach(i=>C(i,e)))}function V(t){const[e,i]=t.split("|"),p=e==null?void 0:e.replace("{{",""),a=i==null?void 0:i.replace("}}","");return[p,a]}function F(t,e){if(!e[t])throw new Error(`Variable ${t} not found`);return e[t]}const se=({schema:t,variables:e,...i})=>{const p=oe(t,e);return n.jsx(te,{schema:p,...i})},ae=()=>n.jsxs(n.Fragment,{children:[n.jsx(T,{variant:"primary",children:"Primary button"}),n.jsx(T,{variant:"secondary",children:"Secondary button"})]}),le=()=>{const t={id:"form-playground",children:[{elementType:"input",description:"This can be your pet's current name, or a new name that you chose.",id:"name",label:"Pet name",errorMessage:"Please enter your pet's name.",requiredCondition:!0,type:"text"},{elementType:"row",id:"row-1",children:[{elementType:"input",id:"type",label:"Is your pet a",options:["Dog","Cat"],requiredCondition:!0,type:"select"},{elementType:"input",id:"gender",label:"What's their gender?",options:["Male","Female"],requiredCondition:!0,type:"select"}]},{id:"breed-row",elementType:"row",children:[{description:`If you don't see it in the list below, select "other" at very bottom of the list.`,elementType:"input",id:"breed",label:"Breed",options:"{{breedOptions|string[]}}",optionsType:"dynamic",type:"select"},{description:`If you don't see your pet's color, please select "other" located at the bottom of the list.`,elementType:"input",id:"color",label:"Color",options:"{{colorOptions|string[]}}",optionsType:"dynamic",requiredCondition:!0,type:"select"}]},{id:"breed-type-spayed",elementType:"row",children:[{elementType:"input",id:"breed-type",label:"What's their breed type?",options:"{{breedTypeOptions|string[]}}",optionsType:"dynamic",requiredCondition:!0,type:"select"},{elementType:"input",id:"spayed-neutered",label:"Are they spayed or neutered?",requiredCondition:!0,type:"boolean"}]},{elementType:"row",id:"birth-date-row",children:[{elementType:"input",id:"birth-month",label:"Birth month",placeholder:"Month",requiredCondition:!0,options:["January","February","March","April","May","June","July","August","September","October","November","December"],type:"select"},{elementType:"input",id:"birth-year",label:"Birth year",placeholder:"Year",requiredCondition:!0,type:"number"}]},{content:n.jsx(w,{size:"base",children:"Please ensure that all the information is complete and accurate. We may contact you periodically to ensure your information remains accurate and up to date."}),elementType:"html",id:"text-note"},{elementType:"input",hideLabel:!0,id:"consent",label:"Consent to release information",errorMessage:"You must consent to release your information.",options:["Do you consent to the release of my name, email, address and telephone number to anyone who finds your pet? You may withdraw your consent at any time."],requiredCondition:!0,type:"checkboxGroup"},{className:"w-full mt-xxlarge",elementType:"button",id:"submit",label:"Save pet",type:"submit"}],version:0};return n.jsx(se,{onChange:e=>{console.log("onChange values",e)},onSubmit:({event:e,values:i})=>{e.preventDefault(),console.log("onSubmit values",i)},schema:t,variables:{breedOptions:["Poodle","Golden Retriever","Labrador","Pug","Beagle"],breedTypeOptions:[],colorOptions:["Black","White","Brown","Grey","Golden"]},values:{breed:"Poodle",gender:"Male",name:"Lili"}})},ue=()=>n.jsxs(n.Fragment,{children:[n.jsx(w,{children:"A default text"}),n.jsx(w,{fontFamily:"raleway",children:"Raleway font-family text"}),n.jsx(w,{fontWeight:"bold",children:"Text with bold weight"})]}),k=Object.freeze(Object.defineProperty({__proto__:null,ButtonPlayground:ae,FormBuilderPlayground:le,TextPlayground:ue},Symbol.toStringTag,{value:"Module"})),M=Object.keys(k),q="display",de=()=>{const[t,e]=Z(),i=t.get(q)??M[0],p=k[i];return n.jsxs("div",{className:"flex w-full gap-xlarge p-base",children:[n.jsx("div",{className:"flex w-[300px] flex-col gap-small",children:M.map(a)}),n.jsx("div",{className:"flex min-h-full w-full flex-col gap-base",children:n.jsx(p,{})})]});function a(d){const S=d===i;return n.jsx(T,{className:"text-sm",fullWidth:!0,onClick:r(d),variant:S?"primary":"secondary",children:d.replace("Playground","")},d)}function r(d){return()=>{e({[q]:d})}}};export{de as default};
