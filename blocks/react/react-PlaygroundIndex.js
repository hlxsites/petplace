import{c as Xt,r as x,u as Kt,j as a,a as Jt,P as lt,b as Zt,d as Qt,e as ei,f as ti,i as ii,g as si,C as Ie,h as Y,I as ge,k as ri,F as ni,T as it,l as Me,m as oi,n as ai,o as li,B as X,S as di,p as ui,q as ci,s as pi,t as hi,v as fi,w as E,x as mi,y as ft,z as gi,A as ze,_ as yi,D as bi,E as vi,G as dt,H as xi}from"./react-index.js";var ut="Collapsible",[wi,on]=Xt(ut),[ji,ct]=wi(ut),Tt=x.forwardRef((i,e)=>{const{__scopeCollapsible:t,open:s,defaultOpen:r,disabled:n,onOpenChange:o,...l}=i,[d=!1,u]=Kt({prop:s,defaultProp:r,onChange:o});return a.jsx(ji,{scope:t,disabled:n,contentId:Jt(),open:d,onOpenToggle:x.useCallback(()=>u(c=>!c),[u]),children:a.jsx(lt.div,{"data-state":ht(d),"data-disabled":n?"":void 0,...l,ref:e})})});Tt.displayName=ut;var Et="CollapsibleTrigger",Ot=x.forwardRef((i,e)=>{const{__scopeCollapsible:t,...s}=i,r=ct(Et,t);return a.jsx(lt.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":ht(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...s,ref:e,onClick:Zt(i.onClick,r.onOpenToggle)})});Ot.displayName=Et;var pt="CollapsibleContent",Ct=x.forwardRef((i,e)=>{const{forceMount:t,...s}=i,r=ct(pt,i.__scopeCollapsible);return a.jsx(Qt,{present:t||r.open,children:({present:n})=>a.jsx(Fi,{...s,ref:e,present:n})})});Ct.displayName=pt;var Fi=x.forwardRef((i,e)=>{const{__scopeCollapsible:t,present:s,children:r,...n}=i,o=ct(pt,t),[l,d]=x.useState(s),u=x.useRef(null),c=ei(e,u),h=x.useRef(0),b=h.current,m=x.useRef(0),F=m.current,j=o.open||l,U=x.useRef(j),q=x.useRef();return x.useEffect(()=>{const S=requestAnimationFrame(()=>U.current=!1);return()=>cancelAnimationFrame(S)},[]),ti(()=>{const S=u.current;if(S){q.current=q.current||{transitionDuration:S.style.transitionDuration,animationName:S.style.animationName},S.style.transitionDuration="0s",S.style.animationName="none";const v=S.getBoundingClientRect();h.current=v.height,m.current=v.width,U.current||(S.style.transitionDuration=q.current.transitionDuration,S.style.animationName=q.current.animationName),d(s)}},[o.open,s]),a.jsx(lt.div,{"data-state":ht(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!j,...n,ref:c,style:{"--radix-collapsible-content-height":b?`${b}px`:void 0,"--radix-collapsible-content-width":F?`${F}px`:void 0,...i.style},children:j&&r})});function ht(i){return i?"open":"closed"}var Si=Tt,Pi=Ot,Ti=Ct;const Ei=ii?x.useLayoutEffect:x.useEffect,Oi={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Ci(){const[i,e]=x.useState(null),[t,s]=x.useState(Oi),r=x.useMemo(()=>new window.ResizeObserver(n=>{if(n[0]){const{x:o,y:l,width:d,height:u,top:c,left:h,bottom:b,right:m}=n[0].contentRect;s({x:o,y:l,width:d,height:u,top:c,left:h,bottom:b,right:m})}}),[]);return Ei(()=>{if(i)return r.observe(i),()=>{r.disconnect()}},[i]),[e,t]}const qi=({children:i,isOpen:e,title:t,...s})=>{const[r,{height:n}]=Ci(),o=si({config:{duration:300},from:{height:0,opacity:0},to:{height:e?n:0,opacity:e?1:0},overflow:"hidden"});return a.jsx(Ie,{padding:"base",children:a.jsxs(Si,{...s,"data-testid":"collapse",open:e,children:[a.jsxs(Pi,{className:Y("flex w-full justify-between bg-transparent p-0 text-black hover:bg-transparent focus:bg-transparent focus:outline-none active:bg-transparent"),children:[t,a.jsx(ge,{display:"chevronDown",className:Y("transition-300 text-orange-300-contrast transition-all",{"rotate-180 transform":e})})]}),a.jsx(Ti,{forceMount:!0,children:a.jsx(ri.div,{"data-testid":"CollapseContentWrapper",style:o,children:a.jsx("div",{ref:r,children:i})})})]})})},Ni=({onClose:i})=>{const[e,t]=x.useState(!1);return{isClosing:e,onCloseWithAnimation:()=>{e||(t(!0),setTimeout(()=>{i(),t(!1)},300))}}},Ui=({isClosing:i,isOpen:e,onClick:t})=>e?a.jsx("div",{className:Y("absolute inset-0 z-50 backdrop-blur-sm",{"animate-fadeIn bg-black/30":!i,"animate-fadeOut":i}),"data-testid":"backdrop",onClick:t}):null,Ai=({ariaLabel:i,children:e,className:t,element:s,id:r,isOpen:n,onClose:o,title:l})=>{const{isClosing:d,onCloseWithAnimation:u}=Ni({onClose:o});if(x.useEffect(()=>{function m(F){!d&&n&&F.key==="Escape"&&u()}return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[d,n,u]),!n)return null;const c=!!l,h=c?`${r}-title`:void 0,b=a.jsxs(a.Fragment,{children:[a.jsx(Ui,{isClosing:d,isOpen:!0,onClick:u}),a.jsx(ni,{focusTrapOptions:{clickOutsideDeactivates:!0,returnFocusOnDeactivate:!0},children:a.jsxs("div",{"aria-label":i,"aria-labelledby":h,"aria-modal":"true",className:Y(t==null?void 0:t.modal,s==="drawer"&&{"animate-slideInFromBottom lg:animate-slideInFromRight":!d,"animate-slideOutToBottom lg:animate-slideOutToRight":d},s==="dialog"&&{"animate-fadeOut":d}),id:r,role:"dialog",tabIndex:-1,children:[a.jsxs("div",{className:Y("mb-small flex items-start",{"justify-end":!c,"justify-between":c}),children:[l&&a.jsx(it,{id:h,level:"h4",children:l}),a.jsx(Me,{className:t==null?void 0:t.closeButton,icon:"closeXMark",iconProps:{size:14},label:`Close ${s}`,onClick:u,variant:"link"})]}),a.jsx("div",{className:"max-h-full overflow-y-auto",children:e})]})})]});return oi.createPortal(b,document.body)},We=({children:i,fullWidth:e,...t})=>a.jsx(Ai,{...t,className:{closeButton:"absolute right-[2px] top-[-41px] text-neutral-white",modal:Y("fixed inset-0 z-50 m-auto max-h-max max-w-max rounded-2xl bg-neutral-white p-xlarge ease-out md:w-1/2 md:max-w-[50%]",{"md:w-full md:max-w-full":e})},element:"dialog",children:i}),qt=({children:i,className:e,dragStyles:t="border-2",handleFiles:s})=>{const r=x.useRef(null);return x.useEffect(()=>{const n=u=>{var c;u.preventDefault(),(c=r.current)==null||c.classList.add(t)},o=u=>{var c;u.preventDefault(),(c=r.current)==null||c.classList.remove(t)},l=u=>{var h,b;u.preventDefault(),(h=r.current)==null||h.classList.remove(t);const c=(b=u.dataTransfer)==null?void 0:b.files;!c||!c.length||s(c)},d=r.current;return d&&(d.addEventListener("dragover",n),d.addEventListener("dragleave",o),d.addEventListener("drop",l)),()=>{d&&(d.removeEventListener("dragover",n),d.removeEventListener("dragleave",o),d.removeEventListener("drop",l))}},[t,s]),a.jsx("div",{ref:r,className:Y("rounded-xl border-dashed",e),children:i})};function Ri(i,e){return x.useEffect(i,ki(e))}function ki(i){const e=x.useRef(i),t=x.useRef(0);return ai(i,e.current)||(e.current=i,t.current+=1),x.useMemo(()=>e.current,[t.current])}const _i=({id:i,onChange:e,value:t,...s})=>{const r=n=>o=>{o.preventDefault(),t!==n&&(e==null||e(n))};return a.jsx(li,{id:i,...s,children:({inputProps:n})=>a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex h-12",children:[a.jsx(X,{className:"rounded-lg rounded-br-none rounded-tr-none",onClick:r(!1),variant:t?"secondary":"primary",children:"No"}),a.jsx(X,{className:"rounded-lg rounded-bl-none rounded-tl-none",onClick:r(!0),variant:t?"primary":"secondary",children:"Yes"})]}),a.jsx("input",{className:"sr-only",defaultChecked:!!t,id:i,onChange:()=>{e==null||e(!t)},name:i,type:"checkbox",...n})]})})},mt=window.location.hostname==="localhost",Li=({schema:i,onChange:e,onSubmit:t,values:s})=>{const r=x.useRef(s||{}),[n,o]=x.useState(r.current),[l,d]=x.useState(!1),u=[],c=u.some(v=>!!v.errorMessage);return Ri(()=>{e&&!fi.isEqual(r.current,n)&&e(n)},[e,n]),a.jsx("form",{id:i.id,noValidate:!0,onSubmit:h,children:a.jsx("div",{className:"space-y-large",children:i.children.map(b)})});function h(v){return c?(v.preventDefault(),d(!0),null):(d(!0),t&&t({event:v,values:n}),n)}function b(v,w){if(!j(v.shouldDisplay??!0))return null;const{elementType:g}=v;if(g==="input")return a.jsx(x.Fragment,{children:m(v)},v.id);if(g==="button")return a.jsx(X,{className:v.className,type:v.type,children:v.label},v.id);const f=`${g}-${w}`;switch(g){case"section":return a.jsx(x.Fragment,{children:F(v)},f);case"html":return a.jsx(x.Fragment,{children:v.content},f);case"row":return a.jsx("div",{className:Y("flex flex-col gap-base lg:flex-row [&>*]:grow [&>*]:basis-0",v.className),id:v.id,children:v.children.map(b)},f);default:if(mt)throw new Error(`Unsupported element type: ${v.elementType}`);return null}}function m({disabledCondition:v,requiredCondition:w,shouldDisplay:g,...f}){if(!j(g??!0))return null;const T=j(v??!1),P=j(w??!1),{id:O,type:D}=f,G={disabled:T,required:P,...f},me=l?q(G):null;if(G.errorMessage=me||void 0,u.push({...G}),D==="select"){const{options:A}=f;return a.jsx(di,{...G,onChange:M=>{o(Yt=>({...Yt,[O]:M}))},options:A,value:(n==null?void 0:n[O])||""})}if(D==="radio")return a.jsx(ui,{...G,onChange:A=>{o(M=>({...M,[O]:A}))},options:f.options||[],value:(n==null?void 0:n[O])||""});if(D==="checkboxGroup")return a.jsx(ci,{...G,onChange:A=>{o(M=>({...M,[O]:A}))},options:f.options||[],value:(n==null?void 0:n[O])||[]});if(D==="boolean")return a.jsx(_i,{...G,onChange:A=>{o(M=>({...M,[O]:A}))},value:typeof(n==null?void 0:n[O])<"u"?!!(n!=null&&n[O]):void 0});if(D==="textarea")return a.jsx(pi,{...G,onChange:A=>{o(M=>({...M,[O]:A}))},value:(n==null?void 0:n[O])||""});if(D==="text"||D==="number")return a.jsx(hi,{...G,onChange:A=>{o(M=>({...M,[O]:A}))},value:(n==null?void 0:n[O])||"",type:D});if(mt)throw new Error(`Unsupported input type: ${D}`);return null}function F({children:v,description:w,id:g,shouldDisplay:f,title:T}){if(j(f||!0))return a.jsxs("section",{className:"my-small",id:g,children:[!!T&&a.jsx("h2",{className:"text-h2",children:T}),!!w&&a.jsx("p",{className:"text-lg text-muted-foreground",children:w}),a.jsx("div",{className:"mt-xsmall space-y-xsmall",children:v.map(b)})]})}function j(v){if(typeof v=="boolean")return v;if("type"in v)return U(v);const{operator:w,conditions:g}=v;return w==="and"?g.every(j):w==="or"?g.some(j):!1}function U({inputId:v,value:w,type:g}){const f=n==null?void 0:n[v];if(g==="contains")return typeof f!="string"?(console.warn('"contains" condition can only be used for strings'),!1):f.includes(w);if(g==="regex"){if(typeof f!="string"||typeof w!="string")return console.warn('"regex" condition can only be used for strings'),!1;try{return new RegExp(w).test(f)}catch{return console.warn('Invalid regex pattern for "regex" condition'),!1}}if(g==="exists")return!!f;if(g==="null")return!f;if(g==="=")return f===w;if(g==="!=")return f!==w;if(["<",">","<=",">="].includes(g)){if(f===void 0||w===void 0)return!1;const T=(P,O)=>g==="<"?P<O:g===">"?P>O:g==="<="?P<=O:g===">="?P>=O:!1;if(typeof f=="number"&&typeof w=="number")return T(f,w);if(f instanceof Date&&w instanceof Date)return T(f.getTime(),w.getTime());console.warn("Cannot compare non-numeric/non-date values for numeric/date operation")}return!1}function q(v){if(v.disabled)return null;const{errorMessage:w,required:g,type:f}=v;return g&&!S(v)?w||(["radio","select"].includes(f)?"Select an option":f==="checkboxGroup"?"Select at least one option":f==="boolean"?"Answer yes or no":"Fill this field"):null}function S({id:v}){const w=n==null?void 0:n[v];return typeof w>"u"?!1:Array.isArray(w)||typeof w=="string"?!!w.length:!0}},Nt=/{{(.*?)\|.*?}}/;function Mi(i,e){if(!e)return i;const t=s=>{const r={...s};if("children"in r)r.children=r.children.map(t);else if("options"in r&&r.optionsType==="dynamic"&&typeof r.options=="string"&&Nt.test(r.options)){const[n]=Ut(r.options),o=At(n,e);r.options=o}return"disabledCondition"in r&&ke(r.disabledCondition,e),"requiredCondition"in r&&ke(r.requiredCondition,e),ke(r.shouldDisplay,e),r};return{...i,children:i.children.map(t)}}function $i(i,e){if(!(i.valueType==="dynamic"&&Nt.test(i.value)))return;const[s]=Ut(i.value),r=At(s,e);i.value=r}function ke(i,e){!i||typeof i=="boolean"||("type"in i?$i(i,e):"conditions"in i&&i.conditions.forEach(t=>ke(t,e)))}function Ut(i){const[e,t]=i.split("|"),s=e==null?void 0:e.replace("{{",""),r=t==null?void 0:t.replace("}}","");return[s,r]}function At(i,e){if(!e[i])throw new Error(`Variable ${i} not found`);return e[i]}const Ii=({schema:i,variables:e,...t})=>{const s=Mi(i,e);return a.jsx(Li,{schema:s,...t})},Rt=()=>a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",name:"loadingIcon",children:[a.jsx("path",{d:"M30 16C30 17.8385 29.6379 19.659 28.9343 21.3576C28.2308 23.0561 27.1995 24.5995 25.8995 25.8995C24.5995 27.1995 23.0561 28.2307 21.3576 28.9343C19.659 29.6379 17.8385 30 16 30C14.1615 30 12.341 29.6379 10.6424 28.9343C8.94387 28.2307 7.40052 27.1995 6.1005 25.8995C4.80048 24.5995 3.76925 23.0561 3.06569 21.3576C2.36212 19.659 2 17.8385 2 16C2 14.1615 2.36212 12.341 3.06569 10.6424C3.76926 8.94387 4.80049 7.40052 6.10051 6.1005C7.40053 4.80048 8.94388 3.76925 10.6424 3.06568C12.341 2.36212 14.1615 2 16 2C17.8385 2 19.659 2.36212 21.3576 3.06569C23.0561 3.76926 24.5995 4.80049 25.8995 6.10051C27.1995 7.40053 28.2308 8.94388 28.9343 10.6424C29.6379 12.341 30 14.1615 30 16L30 16Z",stroke:"#D0D0D6",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M16 2C18.5819 2 21.1135 2.71399 23.315 4.06304C25.5164 5.41208 27.3019 7.34363 28.4741 9.64413C29.6463 11.9446 30.1594 14.5245 29.9568 17.0984C29.7543 19.6724 28.8439 22.1402 27.3262 24.229C25.8086 26.3178 23.7429 27.9463 21.3576 28.9343C18.9722 29.9224 16.36 30.2315 13.8099 29.8276C11.2598 29.4237 8.87103 28.3225 6.90773 26.6457C4.94443 24.9689 3.48306 22.7818 2.68521 20.3262",stroke:"#7369AB",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),a.jsx(E,{srOnly:!0,children:"Wait until load is complete"})]});function zi({countFrom:i,one:e,other:t,zero:s}){const r=Array.isArray(i)?i.length:i;return r===0&&s?s:r<2?e:t}function kt(){return{className:({isEven:e,isHeader:t})=>Y("py-base px-large text-[14px]/[14px]",{"bg-white":e,"bg-neutral-50":!e,"pt-xlarge":t,"text-text-color-supporting":!t})}}const Bi=({colSpan:i=1,column:e,desc:t,sortBy:s,didSort:r})=>{const n=x.useCallback(m=>()=>{r&&(s===m?r(t?null:m,!0):r(m,!1))},[r,t,s]),{className:o}=kt(),l=!!r&&!!e.isSortable,d=l&&s===e.key,u=t?"descending":"ascending",h=d?t?"sortDownS":"sortUpS":"sortS",b=(()=>{const m=a.jsx(mi,{children:e.label});return l?a.jsxs("button",{className:"gap-1 flex",onClick:n(e.key),type:"button",children:[m,a.jsx(ge,{"data-testid":h,display:h,size:14})]}):m})();return a.jsx("th",{"aria-sort":d?u:void 0,colSpan:i,"data-testid":"table_thead_th",className:o({isHeader:!0}),scope:"col",style:{textAlign:e.align??"left",width:e.width},children:b},e.key)},Di=({onSelect:i,rowActions:e})=>{if(!e||e.length<1)return null;return a.jsx("td",{style:{textAlign:"right"},children:e.map(t)});function t({icon:r,id:n,label:o}){return a.jsx(Me,{label:o,icon:r,onClick:s(n)},n)}function s(r){return()=>{i(r)}}},_t=({ariaLabel:i,columns:e,desc:t=!1,didSelect:s,didSort:r,isLoading:n=!1,isSelectable:o=!1,rowActions:l,rows:d,sortBy:u,bulkSelectionActions:c,totalSelectedItems:h=0,didSelectRowAction:b,wrapper:m})=>{const F=((l==null?void 0:l.length)??0)>0,{className:j}=kt(),U=f=>()=>{s==null||s(f)},q=h>0;if(n)return a.jsx(Rt,{});if(!d.length)return null;const S=a.jsx("div",{className:"w-auto overflow-hidden py-large",children:a.jsx(Ie,{children:a.jsx("div",{className:"scrolling-touch overflow-x-auto",children:a.jsx("div",{className:"w-full",children:v()})})})});if(m)return m(S);return S;function v(){const f=w(),T=f.every(({label:P})=>!P)?null:a.jsx("thead",{children:a.jsx("tr",{children:f.map(P=>a.jsx(Bi,{colSpan:P.key==="bulkSelectionHeader"?e.length:1,column:P,desc:t,didSort:r,sortBy:u},P.key))})});return a.jsxs("table",{"aria-label":i,className:"min-w-full table-auto",children:[T,a.jsx("tbody",{children:d.map((P,O)=>{const D=O%2===0,G=o?a.jsx("td",{className:Y(j({isEven:D})),children:a.jsx(ft,{id:P.key,label:"Select item",checked:!!P.isSelected,onCheckedChange:U(P.key)})}):null;return a.jsxs("tr",{className:Y("hover table-row w-fit"),"data-testid":"table_tbody_tr",children:[G,e.map(me=>{const A=P.data[me.key];let M=A;return typeof A=="string"&&(M=a.jsx("span",{className:"inline-block",children:A})),a.jsx("td",{className:j({isEven:D}),style:{textAlign:me.align??"left",minWidth:me.width},children:M},`${P.key}_${me.key}`)}),a.jsx(Di,{onSelect:g(P),rowActions:l})]},`row-${P.key}`)})})]})}function w(){const f={align:"right",key:"actionsColumn",label:"Actions",width:"5%"};let T=[];if(o&&s){const P=h===d.length;T.push({key:"inputCheckbox",label:a.jsx(ft,{checked:P,hideLabel:!0,id:"select-all",label:"Select all items",onCheckedChange:U("allOrNone")}),width:24})}return q?T.push({align:"left",key:"bulkSelectionHeader",label:a.jsxs(a.Fragment,{children:[a.jsx("span",{style:{marginRight:16},children:zi({countFrom:h,one:"One selected item",other:`${h} selected items`})}),c==null?void 0:c.map(({label:P,onClick:O})=>a.jsx(X,{onClick:O,variant:"secondary",children:P},P))]})}):T=[...T,...e],F?[...T,f]:T}function g(f){return T=>{b==null||b(f,T)}}},Wi=()=>a.jsxs(a.Fragment,{children:[a.jsx(X,{variant:"primary",children:"Primary button"}),a.jsx(X,{variant:"secondary",children:"Secondary button"})]}),Gi=()=>{const[i,e]=x.useState(!1);return a.jsxs(qi,{title:"Lost Pets Status Update",onOpenChange:()=>e(!i),isOpen:i,children:[a.jsx(E,{size:"base",children:"Track your pet's status."}),a.jsx("div",{className:"mt-base rounded-xl border p-base",children:a.jsx(E,{children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularized in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})}),a.jsxs(X,{variant:"secondary",className:"mt-base",fullWidth:!0,children:[a.jsx(ge,{display:"check",className:"mr-small"})," Report as Found"]})]})},Vi=()=>{const[i,e]=x.useState(null);return a.jsxs("div",{className:"flex flex-col items-center gap-base",children:[t("Open basic dialog","basic"),a.jsxs(We,{id:"basic",isOpen:i==="basic",onClose:()=>e(null),title:"The dialog title",children:[a.jsx(E,{children:"Ut error enim. Modi qui voluptates quibusdam aliquid repudiandae nulla autem. Consequatur incidunt unde quis at et quis hic sed veniam. Voluptatem et possimus consequatur sapiente officiis qui. Omnis qui eaque asperiores sed earum incidunt."}),a.jsx(E,{children:"At dolores alias temporibus tempora mollitia quo. Similique ut iusto occaecati eveniet excepturi. Sint ut pariatur ex dolores perferendis. Dolorum vel voluptatibus voluptas dolores. Dolores consequatur inventore magni. Ad nesciunt commodi neque non quibusdam. Molestiae exercitationem distinctio et nemo et quia. Sunt unde velit mollitia quaerat."})]}),t("Open fullwidth dialog","fullwidth"),a.jsxs(We,{id:"fullwidth",fullWidth:!0,isOpen:i==="fullwidth",onClose:()=>e(null),title:"The fullwidth dialog",children:[a.jsx(E,{children:"Ut error enim. Modi qui voluptates quibusdam aliquid repudiandae nulla autem. Consequatur incidunt unde quis at et quis hic sed veniam. Voluptatem et possimus consequatur sapiente officiis qui. Omnis qui eaque asperiores sed earum incidunt."}),a.jsx(E,{children:"At dolores alias temporibus tempora mollitia quo. Similique ut iusto occaecati eveniet excepturi. Sint ut pariatur ex dolores perferendis. Dolorum vel voluptatibus voluptas dolores. Dolores consequatur inventore magni. Ad nesciunt commodi neque non quibusdam. Molestiae exercitationem distinctio et nemo et quia. Sunt unde velit mollitia quaerat."})]}),t("Open scrollable dialog","scrollable"),a.jsxs(We,{id:"scrollable",isOpen:i==="scrollable",onClose:()=>e(null),title:"The scrollable dialog",children:[a.jsx(E,{children:"Eu ipsum nostrud et do fugiat. Eiusmod eiusmod do aute elit nisi qui excepteur elit do consectetur culpa occaecat voluptate ea. Id occaecat dolore est ad id irure sint cupidatat. Fugiat velit nisi duis ad commodo do adipisicing. Exercitation nulla adipisicing proident officia mollit mollit ipsum esse consequat consectetur consectetur anim commodo commodo. Est velit incididunt eu deserunt eu aliquip. Irure nisi nostrud eiusmod qui do. Irure duis sunt proident reprehenderit nulla. Occaecat aute nostrud est sunt sit. Pariatur esse aliquip nisi consectetur. Nisi incididunt et officia aliquip est anim magna elit tempor aute in. Est et quis sit enim. Sit adipisicing ullamco pariatur voluptate aute cupidatat deserunt."}),a.jsx(E,{children:"Occaecat dolore consectetur fugiat ut consequat est tempor id. Proident sit aliquip mollit sunt et labore qui irure ipsum eu reprehenderit aute. Adipisicing Lorem dolor exercitation veniam ad laborum amet mollit consequat veniam et labore nisi. Laborum velit do laborum adipisicing sint nostrud sunt ex quis culpa. Duis enim incididunt pariatur in ut qui aliquip aute voluptate anim."}),a.jsx(E,{children:"Aliqua esse pariatur sint nulla pariatur qui do non nulla adipisicing aliquip aute. Ut tempor non irure duis consequat enim occaecat tempor nostrud mollit elit. Eiusmod consequat aute elit deserunt laborum sunt eiusmod veniam excepteur est ea cupidatat fugiat nisi ex. Magna cillum non tempor excepteur quis veniam nostrud minim esse. Tempor occaecat et Lorem fugiat exercitation magna minim incididunt aliqua magna enim."}),a.jsx(E,{children:"Eu ipsum nostrud et do fugiat. Eiusmod eiusmod do aute elit nisi qui excepteur elit do consectetur culpa occaecat voluptate ea. Id occaecat dolore est ad id irure sint cupidatat. Fugiat velit nisi duis ad commodo do adipisicing. Exercitation nulla adipisicing proident officia mollit mollit ipsum esse consequat consectetur consectetur anim commodo commodo. Est velit incididunt eu deserunt eu aliquip. Irure nisi nostrud eiusmod qui do. Irure duis sunt proident reprehenderit nulla. Occaecat aute nostrud est sunt sit. Pariatur esse aliquip nisi consectetur. Nisi incididunt et officia aliquip est anim magna elit tempor aute in. Est et quis sit enim. Sit adipisicing ullamco pariatur voluptate aute cupidatat deserunt."}),a.jsx(E,{children:"Occaecat dolore consectetur fugiat ut consequat est tempor id. Proident sit aliquip mollit sunt et labore qui irure ipsum eu reprehenderit aute. Adipisicing Lorem dolor exercitation veniam ad laborum amet mollit consequat veniam et labore nisi. Laborum velit do laborum adipisicing sint nostrud sunt ex quis culpa. Duis enim incididunt pariatur in ut qui aliquip aute voluptate anim."}),a.jsx(E,{children:"Aliqua esse pariatur sint nulla pariatur qui do non nulla adipisicing aliquip aute. Ut tempor non irure duis consequat enim occaecat tempor nostrud mollit elit. Eiusmod consequat aute elit deserunt laborum sunt eiusmod veniam excepteur est ea cupidatat fugiat nisi ex. Magna cillum non tempor excepteur quis veniam nostrud minim esse. Tempor occaecat et Lorem fugiat exercitation magna minim incididunt aliqua magna enim."}),a.jsx(E,{children:"Eu ipsum nostrud et do fugiat. Eiusmod eiusmod do aute elit nisi qui excepteur elit do consectetur culpa occaecat voluptate ea. Id occaecat dolore est ad id irure sint cupidatat. Fugiat velit nisi duis ad commodo do adipisicing. Exercitation nulla adipisicing proident officia mollit mollit ipsum esse consequat consectetur consectetur anim commodo commodo. Est velit incididunt eu deserunt eu aliquip. Irure nisi nostrud eiusmod qui do. Irure duis sunt proident reprehenderit nulla. Occaecat aute nostrud est sunt sit. Pariatur esse aliquip nisi consectetur. Nisi incididunt et officia aliquip est anim magna elit tempor aute in. Est et quis sit enim. Sit adipisicing ullamco pariatur voluptate aute cupidatat deserunt."}),a.jsx(E,{children:"Occaecat dolore consectetur fugiat ut consequat est tempor id. Proident sit aliquip mollit sunt et labore qui irure ipsum eu reprehenderit aute. Adipisicing Lorem dolor exercitation veniam ad laborum amet mollit consequat veniam et labore nisi. Laborum velit do laborum adipisicing sint nostrud sunt ex quis culpa. Duis enim incididunt pariatur in ut qui aliquip aute voluptate anim."}),a.jsx(E,{children:"Aliqua esse pariatur sint nulla pariatur qui do non nulla adipisicing aliquip aute. Ut tempor non irure duis consequat enim occaecat tempor nostrud mollit elit. Eiusmod consequat aute elit deserunt laborum sunt eiusmod veniam excepteur est ea cupidatat fugiat nisi ex. Magna cillum non tempor excepteur quis veniam nostrud minim esse. Tempor occaecat et Lorem fugiat exercitation magna minim incididunt aliqua magna enim."}),a.jsx(E,{children:"Occaecat dolore consectetur fugiat ut consequat est tempor id. Proident sit aliquip mollit sunt et labore qui irure ipsum eu reprehenderit aute. Adipisicing Lorem dolor exercitation veniam ad laborum amet mollit consequat veniam et labore nisi. Laborum velit do laborum adipisicing sint nostrud sunt ex quis culpa. Duis enim incididunt pariatur in ut qui aliquip aute voluptate anim."}),a.jsx(E,{children:"Aliqua esse pariatur sint nulla pariatur qui do non nulla adipisicing aliquip aute. Ut tempor non irure duis consequat enim occaecat tempor nostrud mollit elit. Eiusmod consequat aute elit deserunt laborum sunt eiusmod veniam excepteur est ea cupidatat fugiat nisi ex. Magna cillum non tempor excepteur quis veniam nostrud minim esse. Tempor occaecat et Lorem fugiat exercitation magna minim incididunt aliqua magna enim."})]})]});function t(s,r){return a.jsx(X,{"aria-controls":r,"aria-haspopup":"dialog","aria-expanded":i===r,onClick:()=>e(r),variant:"secondary",children:s})}},Hi=()=>{const[i,e]=x.useState(),[t,s]=x.useState("");return a.jsx(qt,{handleFiles:r=>{if(r[0].name!==i)return e(r[0].name);s("Drop a different file!"),setTimeout(()=>{s("")},3e3)},children:a.jsxs("div",{className:"flex-col justify-center border p-xxxxxlarge",children:[a.jsx("div",{children:a.jsx(ge,{display:"uploadCloud",size:48,className:"text-brand-main"})}),i&&a.jsxs("h4",{className:"text-black",children:["You dropped the file: ",i," "]}),a.jsx("p",{className:"text-black",children:t})]})})},Yi=()=>{const i={id:"form-playground",children:[{elementType:"input",description:"This can be your pet's current name, or a new name that you chose.",id:"name",label:"Pet name",errorMessage:"Please enter your pet's name.",requiredCondition:!0,type:"text"},{elementType:"row",children:[{elementType:"input",id:"type",label:"Is your pet a",options:["Dog","Cat"],requiredCondition:!0,type:"select"},{elementType:"input",id:"gender",label:"What's their gender?",options:["Male","Female"],requiredCondition:!0,type:"select"}]},{elementType:"row",children:[{description:`If you don't see it in the list below, select "other" at very bottom of the list.`,elementType:"input",id:"breed",label:"Breed",options:"{{breedOptions|string[]}}",optionsType:"dynamic",type:"select"},{description:`If you don't see your pet's color, please select "other" located at the bottom of the list.`,elementType:"input",id:"color",label:"Color",options:"{{colorOptions|string[]}}",optionsType:"dynamic",requiredCondition:!0,type:"select"}]},{elementType:"row",children:[{elementType:"input",id:"breed-type",label:"What's their breed type?",options:"{{breedTypeOptions|string[]}}",optionsType:"dynamic",requiredCondition:!0,type:"select"},{elementType:"input",id:"spayed-neutered",label:"Are they spayed or neutered?",requiredCondition:!0,type:"boolean"}]},{elementType:"row",children:[{elementType:"input",id:"birth-month",label:"Birth month",placeholder:"Month",requiredCondition:!0,options:["January","February","March","April","May","June","July","August","September","October","November","December"],type:"select"},{elementType:"input",id:"birth-year",label:"Birth year",placeholder:"Year",requiredCondition:!0,type:"number"}]},{content:a.jsx(E,{size:"base",children:"Please ensure that all the information is complete and accurate. We may contact you periodically to ensure your information remains accurate and up to date."}),elementType:"html"},{elementType:"input",hideLabel:!0,id:"consent",label:"Consent to release information",errorMessage:"You must consent to release your information.",options:["Do you consent to the release of my name, email, address and telephone number to anyone who finds your pet? You may withdraw your consent at any time."],requiredCondition:!0,type:"checkboxGroup"},{className:"w-full mt-xxlarge",elementType:"button",id:"submit",label:"Save pet",type:"submit"}],version:0};return a.jsx(Ii,{onChange:e=>{console.log("onChange values",e)},onSubmit:({event:e,values:t})=>{e.preventDefault(),console.log("onSubmit values",t)},schema:i,variables:{breedOptions:["Poodle","Golden Retriever","Labrador","Pug","Beagle"],breedTypeOptions:[],colorOptions:["Black","White","Brown","Grey","Golden"]},values:{breed:"Poodle",gender:"Male",name:"Lili"}})},Xi=()=>a.jsx("div",{children:a.jsx(gi,{petName:"Lily"})});async function Ki({downloadPath:i,fileName:e,fileType:t}){if(!(!i||t))try{const s=await fetch(i);if(!s.ok)throw new Error("Network response was not ok");const r=await s.blob(),n=URL.createObjectURL(r),o=document.createElement("a");o.style.display="none",o.href=n,o.download=`${e??"sample"}.${t}`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(n)}catch(s){console.error("Error downloading the file: ",s)}}const Oe=({record:i,isUploadingFile:e,onDelete:t})=>{const{downloadPath:s,fileName:r,fileType:n}=i;return a.jsx(Ie,{role:"listitem",children:a.jsxs("div",{className:"flex justify-between p-base",children:[a.jsxs("div",{className:"flex items-center gap-small",children:[a.jsx(ge,{className:"text-neutral-white",display:o()}),a.jsx(E,{color:"secondary",size:"xs",children:r})]}),e?a.jsx(Rt,{}):a.jsxs("div",{className:"flex items-center",children:[a.jsx(Me,{label:"download file",icon:"download",iconProps:{className:"text-orange-300-contrast lg:mr-[-8px]",size:16},onClick:l,variant:"link"}),a.jsx(Me,{label:"delete file",icon:"trash",iconProps:{className:"text-orange-300-contrast",size:16},onClick:t,variant:"link"})]})]})});function o(){return n?n==="docx"?"docFile":`${n}File`:"pdfFile"}function l(){Ki({downloadPath:s,fileName:r,fileType:n}).catch(d=>{console.warn("Error handling the download: ",d)})}},Ji=()=>{const[i,e]=x.useState(!1);return a.jsxs("div",{className:"grid max-w-[300px] gap-xlarge",children:[a.jsxs("div",{className:"grid gap-small",children:[a.jsx(Oe,{record:{downloadPath:"https://i.natgeofe.com/n/4f5aaece-3300-41a4-b2a8-ed2708a0a27c/domestic-dog_thumb_square.jpg",fileName:"Dog image",fileType:"jpg"}}),a.jsx(Oe,{record:{downloadPath:"https://training.github.com/downloads/pt_BR/github-git-cheat-sheet.pdf",fileName:"PDF gitHub",fileType:"pdf"}})]}),a.jsx(X,{onClick:()=>e(t=>!t),children:"Upload"}),i&&a.jsx(Oe,{record:{fileName:"Upload test"},isUploadingFile:i})]})};function Ne(i,e){if(!{}.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var Zi=0;function Lt(i){return"__private_"+Zi+++"_"+i}function Qi(i,e,t){const s=[];return i.forEach(r=>typeof r!="string"?s.push(r):e[Symbol.split](r).forEach((n,o,l)=>{n!==""&&s.push(n),o<l.length-1&&s.push(t)})),s}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function gt(i,e){const t=/\$/g,s="$$$$";let r=[i];if(e==null)return r;for(const n of Object.keys(e))if(n!=="_"){let o=e[n];typeof o=="string"&&(o=t[Symbol.replace](o,s)),r=Qi(r,new RegExp(`%\\{${n}\\}`,"g"),o)}return r}const es=i=>{throw new Error(`missing string: ${i}`)};var be=Lt("onMissingKey"),ve=Lt("apply");class Mt{constructor(e,t){let{onMissingKey:s=es}=t===void 0?{}:t;Object.defineProperty(this,ve,{value:ts}),Object.defineProperty(this,be,{writable:!0,value:void 0}),this.locale={strings:{},pluralize(r){return r===1?0:1}},Array.isArray(e)?e.forEach(Ne(this,ve)[ve],this):Ne(this,ve)[ve](e),Ne(this,be)[be]=s}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let s=this.locale.strings[e];if(s==null&&(Ne(this,be)[be](e),s=e),typeof s=="object"){if(t&&typeof t.smart_count<"u"){const n=this.locale.pluralize(t.smart_count);return gt(s[n],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof s!="string")throw new Error("string was not a string");return gt(s,t)}}function ts(i){if(!(i!=null&&i.strings))return;const e=this.locale;Object.assign(this.locale,{strings:{...e.strings,...i.strings},pluralize:i.pluralize||e.pluralize})}var is=function(){var e={},t=e._fns={};e.emit=function(o,l,d,u,c,h,b){var m=s(o);m.length&&r(o,m,[l,d,u,c,h,b])},e.on=function(o,l){t[o]||(t[o]=[]),t[o].push(l)},e.once=function(o,l){function d(){l.apply(this,arguments),e.off(o,d)}this.on(o,d)},e.off=function(o,l){var d=[];if(o&&l){var u=this._fns[o],c=0,h=u?u.length:0;for(c;c<h;c++)u[c]!==l&&d.push(u[c])}d.length?this._fns[o]=d:delete this._fns[o]};function s(n){var o=t[n]?t[n]:[],l=n.indexOf(":"),d=l===-1?[n]:[n.substring(0,l),n.substring(l+1)],u=Object.keys(t),c=0,h=u.length;for(c;c<h;c++){var b=u[c];if(b==="*"&&(o=o.concat(t[b])),d.length===2&&d[0]===b){o=o.concat(t[b]);break}}return o}function r(n,o,l){var d=0,u=o.length;for(d;d<u&&o[d];d++)o[d].event=n,o[d].apply(o[d],l)}return e};const ss=ze(is);let rs="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",ns=(i=21)=>{let e="",t=i;for(;t--;)e+=rs[Math.random()*64|0];return e};var os=yi,as=function(){return os.Date.now()},ls=as,ds=/\s/;function us(i){for(var e=i.length;e--&&ds.test(i.charAt(e)););return e}var cs=us,ps=cs,hs=/^\s+/;function fs(i){return i&&i.slice(0,ps(i)+1).replace(hs,"")}var ms=fs,gs=bi,ys=vi,bs="[object Symbol]";function vs(i){return typeof i=="symbol"||ys(i)&&gs(i)==bs}var xs=vs,ws=ms,yt=dt,js=xs,bt=NaN,Fs=/^[-+]0x[0-9a-f]+$/i,Ss=/^0b[01]+$/i,Ps=/^0o[0-7]+$/i,Ts=parseInt;function Es(i){if(typeof i=="number")return i;if(js(i))return bt;if(yt(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=yt(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=ws(i);var t=Ss.test(i);return t||Ps.test(i)?Ts(i.slice(2),t?2:8):Fs.test(i)?bt:+i}var Os=Es,Cs=dt,Ge=ls,vt=Os,qs="Expected a function",Ns=Math.max,Us=Math.min;function As(i,e,t){var s,r,n,o,l,d,u=0,c=!1,h=!1,b=!0;if(typeof i!="function")throw new TypeError(qs);e=vt(e)||0,Cs(t)&&(c=!!t.leading,h="maxWait"in t,n=h?Ns(vt(t.maxWait)||0,e):n,b="trailing"in t?!!t.trailing:b);function m(f){var T=s,P=r;return s=r=void 0,u=f,o=i.apply(P,T),o}function F(f){return u=f,l=setTimeout(q,e),c?m(f):o}function j(f){var T=f-d,P=f-u,O=e-T;return h?Us(O,n-P):O}function U(f){var T=f-d,P=f-u;return d===void 0||T>=e||T<0||h&&P>=n}function q(){var f=Ge();if(U(f))return S(f);l=setTimeout(q,j(f))}function S(f){return l=void 0,b&&s?m(f):(s=r=void 0,o)}function v(){l!==void 0&&clearTimeout(l),u=0,s=d=r=l=void 0}function w(){return l===void 0?o:S(Ge())}function g(){var f=Ge(),T=U(f);if(s=arguments,r=this,d=f,T){if(l===void 0)return F(d);if(h)return clearTimeout(l),l=setTimeout(q,e),m(d)}return l===void 0&&(l=setTimeout(q,e)),o}return g.cancel=v,g.flush=w,g}var Rs=As,ks=Rs,_s=dt,Ls="Expected a function";function Ms(i,e,t){var s=!0,r=!0;if(typeof i!="function")throw new TypeError(Ls);return _s(t)&&(s="leading"in t?!!t.leading:s,r="trailing"in t?!!t.trailing:r),ks(i,e,{leading:s,maxWait:e,trailing:r})}var $s=Ms;const Is=ze($s);function _e(i,e){if(!{}.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var zs=0;function $t(i){return"__private_"+zs+++"_"+i}const Bs={version:"4.1.0"};var ue=$t("callbacks"),Ve=$t("publish");class It{constructor(){Object.defineProperty(this,Ve,{value:Ds}),this.state={},Object.defineProperty(this,ue,{writable:!0,value:new Set})}getState(){return this.state}setState(e){const t={...this.state},s={...this.state,...e};this.state=s,_e(this,Ve)[Ve](t,s,e)}subscribe(e){return _e(this,ue)[ue].add(e),()=>{_e(this,ue)[ue].delete(e)}}}function Ds(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];_e(this,ue)[ue].forEach(s=>{s(...e)})}It.VERSION=Bs.version;function zt(i){const e=i.lastIndexOf(".");return e===-1||e===i.length-1?{name:i,extension:void 0}:{name:i.slice(0,e),extension:i.slice(e+1)}}const xt={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function Bt(i){var e;if(i.type)return i.type;const t=i.name?(e=zt(i.name).extension)==null?void 0:e.toLowerCase():null;return t&&t in xt?xt[t]:"application/octet-stream"}function Ws(i){return i.charCodeAt(0).toString(32)}function wt(i){let e="";return i.replace(/[^A-Z0-9]/gi,t=>(e+=`-${Ws(t)}`,"/"))+e}function Gs(i,e){let t=e||"uppy";return typeof i.name=="string"&&(t+=`-${wt(i.name.toLowerCase())}`),i.type!==void 0&&(t+=`-${i.type}`),i.meta&&typeof i.meta.relativePath=="string"&&(t+=`-${wt(i.meta.relativePath.toLowerCase())}`),i.data.size!==void 0&&(t+=`-${i.data.size}`),i.data.lastModified!==void 0&&(t+=`-${i.data.lastModified}`),t}function Vs(i){return!i.isRemote||!i.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(i.remote.provider)}function Hs(i,e){if(Vs(i))return i.id;const t=Bt(i);return Gs({...i,type:t},e)}function Ys(i){if(i==null&&typeof navigator<"u"&&(i=navigator.userAgent),!i)return!0;const e=/Edge\/(\d+\.\d+)/.exec(i);if(!e)return!0;const s=e[1].split(".",2),r=parseInt(s[0],10),n=parseInt(s[1],10);return r<15||r===15&&n<15063||r>18||r===18&&n>=18218}function Xs(i,e){return e.name?e.name:i.split("/")[0]==="image"?`${i.split("/")[0]}.${i.split("/")[1]}`:"noname"}function He(i){return i<10?`0${i}`:i.toString()}function Le(){const i=new Date,e=He(i.getHours()),t=He(i.getMinutes()),s=He(i.getSeconds());return`${e}:${t}:${s}`}const Ks={debug:()=>{},warn:()=>{},error:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return console.error(`[Uppy] [${Le()}]`,...e)}},Js={debug:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return console.debug(`[Uppy] [${Le()}]`,...e)},warn:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return console.warn(`[Uppy] [${Le()}]`,...e)},error:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return console.error(`[Uppy] [${Le()}]`,...e)}};var Zs=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);const t=e<0,s=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return`${(t?"-":"")+e} B`;const r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),s.length-1);e=Number(e/1024**r);const n=s[r];return e>=10||e%1===0?`${(t?"-":"")+e.toFixed(0)} ${n}`:`${(t?"-":"")+e.toFixed(1)} ${n}`};const Ue=ze(Zs);function Dt(i,e){this.text=i=i||"",this.hasWild=~i.indexOf("*"),this.separator=e,this.parts=i.split(e)}Dt.prototype.match=function(i){var e=!0,t=this.parts,s,r=t.length,n;if(typeof i=="string"||i instanceof String)if(!this.hasWild&&this.text!=i)e=!1;else{for(n=(i||"").split(this.separator),s=0;e&&s<r;s++)t[s]!=="*"&&(s<n.length?e=t[s]===n[s]:e=!1);e=e&&n}else if(typeof i.splice=="function")for(e=[],s=i.length;s--;)this.match(i[s])&&(e[e.length]=i[s]);else if(typeof i=="object"){e={};for(var o in i)this.match(o)&&(e[o]=i[o])}return e};var Qs=function(i,e,t){var s=new Dt(i,t||/[\/\.]/);return typeof e<"u"?s.match(e):s},er=Qs,tr=/[\/\+\.]/,ir=function(i,e){function t(s){var r=er(s,i,tr);return r&&r.length>=2}return e?t(e.split(";")[0]):t};const sr=ze(ir),rr={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class V extends Error{constructor(e,t){var s;super(e),this.isRestriction=!0,this.isUserFacing=(s=t==null?void 0:t.isUserFacing)!=null?s:!0,t!=null&&t.file&&(this.file=t.file)}}class nr{constructor(e,t){this.getI18n=t,this.getOpts=()=>{var s;const r=e();if(((s=r.restrictions)==null?void 0:s.allowedFileTypes)!=null&&!Array.isArray(r.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return r}}validateAggregateRestrictions(e,t){const{maxTotalFileSize:s,maxNumberOfFiles:r}=this.getOpts().restrictions;if(r&&e.filter(o=>!o.isGhost).length+t.length>r)throw new V(`${this.getI18n()("youCanOnlyUploadX",{smart_count:r})}`);if(s){const n=[...e,...t].reduce((o,l)=>{var d;return o+((d=l.size)!=null?d:0)},0);if(n>s)throw new V(this.getI18n()("aggregateExceedsSize",{sizeAllowed:Ue(s),size:Ue(n)}))}}validateSingleFile(e){const{maxFileSize:t,minFileSize:s,allowedFileTypes:r}=this.getOpts().restrictions;if(r&&!r.some(l=>l.includes("/")?e.type?sr(e.type.replace(/;.*?$/,""),l):!1:l[0]==="."&&e.extension?e.extension.toLowerCase()===l.slice(1).toLowerCase():!1)){const l=r.join(", ");throw new V(this.getI18n()("youCanOnlyUploadFileTypes",{types:l}),{file:e})}if(t&&e.size!=null&&e.size>t){var n;throw new V(this.getI18n()("exceedsSize",{size:Ue(t),file:(n=e.name)!=null?n:this.getI18n()("unnamed")}),{file:e})}if(s&&e.size!=null&&e.size<s)throw new V(this.getI18n()("inferiorSize",{size:Ue(s)}),{file:e})}validate(e,t){t.forEach(s=>{this.validateSingleFile(s)}),this.validateAggregateRestrictions(e,t)}validateMinNumberOfFiles(e){const{minNumberOfFiles:t}=this.getOpts().restrictions;if(t&&Object.keys(e).length<t)throw new V(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){var t;const s=new V(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:(t=e.name)!=null?t:this.getI18n()("unnamed")})),{requiredMetaFields:r}=this.getOpts().restrictions,n=[];for(const o of r)(!Object.hasOwn(e.meta,o)||e.meta[o]==="")&&n.push(o);return{missingFields:n,error:s}}}const or={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed"}};function p(i,e){if(!{}.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var ar=0;function C(i){return"__private_"+ar+++"_"+i}const lr={version:"4.1.0"},Ae={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};var N=C("plugins"),_=C("restricter"),xe=C("storeUnsubscribe"),K=C("emitter"),ce=C("preProcessors"),pe=C("uploaders"),ie=C("postProcessors"),B=C("informAndEmit"),qe=C("checkRequiredMetaFieldsOnFile"),Ye=C("checkRequiredMetaFields"),we=C("assertNewUploadAllowed"),st=C("transformFile"),je=C("startIfAutoProceed"),Fe=C("checkAndUpdateFileState"),Xe=C("addListeners"),H=C("updateOnlineStatus"),Se=C("requestClientById"),J=C("createUpload"),Ke=C("getUpload"),he=C("removeUpload"),Z=C("runUpload");class Be{constructor(e){Object.defineProperty(this,Z,{value:xr}),Object.defineProperty(this,he,{value:vr}),Object.defineProperty(this,Ke,{value:br}),Object.defineProperty(this,J,{value:yr}),Object.defineProperty(this,Xe,{value:gr}),Object.defineProperty(this,Fe,{value:mr}),Object.defineProperty(this,je,{value:fr}),Object.defineProperty(this,st,{value:hr}),Object.defineProperty(this,we,{value:pr}),Object.defineProperty(this,Ye,{value:cr}),Object.defineProperty(this,qe,{value:ur}),Object.defineProperty(this,B,{value:dr}),Object.defineProperty(this,N,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,xe,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:ss()}),Object.defineProperty(this,ce,{writable:!0,value:new Set}),Object.defineProperty(this,pe,{writable:!0,value:new Set}),Object.defineProperty(this,ie,{writable:!0,value:new Set}),this.scheduledAutoProceed=null,this.wasOffline=!1,this.calculateProgress=Is((r,n)=>{const o=this.getFile(r==null?void 0:r.id);if(r==null||!o){this.log(`Not setting progress for a file that has been removed: ${r==null?void 0:r.id}`);return}if(o.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${r.id}`);return}const l=Number.isFinite(n.bytesTotal)&&n.bytesTotal>0;this.setFileState(r.id,{progress:{...o.progress,bytesUploaded:n.bytesUploaded,bytesTotal:n.bytesTotal,percentage:l?Math.round(n.bytesUploaded/n.bytesTotal*100):0}}),this.calculateTotalProgress()},500,{leading:!0,trailing:!0}),Object.defineProperty(this,H,{writable:!0,value:this.updateOnlineStatus.bind(this)}),Object.defineProperty(this,Se,{writable:!0,value:new Map}),this.defaultLocale=or;const t={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:rr,meta:{},onBeforeFileAdded:(r,n)=>!Object.hasOwn(n,r.id),onBeforeUpload:r=>r,store:new It,logger:Ks,infoTimeout:5e3},s={...t,...e};this.opts={...s,restrictions:{...t.restrictions,...e&&e.restrictions}},e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=Js),this.log(`Using Core v${Be.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...Ae,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:Ys(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),p(this,_)[_]=new nr(()=>this.opts,()=>this.i18n),p(this,xe)[xe]=this.store.subscribe((r,n,o)=>{this.emit("state-update",r,n,o),this.updateAll(n)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),p(this,Xe)[Xe]()}emit(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];p(this,K)[K].emit(e,...s)}on(e,t){return p(this,K)[K].on(e,t),this}once(e,t){return p(this,K)[K].once(e,t),this}off(e,t){return p(this,K)[K].off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){const t=this.getState().files;this.setState({files:{...t,...Object.fromEntries(Object.entries(e).map(s=>{let[r,n]=s;return[r,{...t[r],...n}]}))}})}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Can’t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:t})}i18nInit(){const e=s=>this.log(`Missing i18n string: ${s}`,"error"),t=new Mt([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.locale=t.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e==null?void 0:e.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions(e)}),this.setState(void 0)}resetProgress(){const e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},t={...this.getState().files},s=Object.create(null);Object.keys(t).forEach(r=>{s[r]={...t[r],progress:{...t[r].progress,...e}}}),this.setState({files:s,...Ae})}clear(){const{capabilities:e,currentUploads:t}=this.getState();if(Object.keys(t).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...Ae,files:{}})}addPreProcessor(e){p(this,ce)[ce].add(e)}removePreProcessor(e){return p(this,ce)[ce].delete(e)}addPostProcessor(e){p(this,ie)[ie].add(e)}removePostProcessor(e){return p(this,ie)[ie].delete(e)}addUploader(e){p(this,pe)[pe].add(e)}removeUploader(e){return p(this,pe)[pe].delete(e)}setMeta(e){const t={...this.getState().meta,...e},s={...this.getState().files};Object.keys(s).forEach(r=>{s[r]={...s[r],meta:{...s[r].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:s})}setFileMeta(e,t){const s={...this.getState().files};if(!s[e]){this.log("Was trying to set metadata for a file that has been removed: ",e);return}const r={...s[e].meta,...t};s[e]={...s[e],meta:r},this.setState({files:s})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(t=>this.getFile(t))}getObjectOfFilesPerState(){const{files:e,totalProgress:t,error:s}=this.getState(),r=Object.values(e),n=[],o=[],l=[],d=[],u=[],c=[],h=[],b=[],m=[];for(const F of r){const{progress:j}=F;!j.uploadComplete&&j.uploadStarted&&(n.push(F),F.isPaused||b.push(F)),j.uploadStarted||o.push(F),(j.uploadStarted||j.preprocess||j.postprocess)&&l.push(F),j.uploadStarted&&d.push(F),F.isPaused&&u.push(F),j.uploadComplete&&c.push(F),F.error&&h.push(F),(j.preprocess||j.postprocess)&&m.push(F)}return{newFiles:o,startedFiles:l,uploadStartedFiles:d,pausedFiles:u,completeFiles:c,erroredFiles:h,inProgressFiles:n,inProgressNotPausedFiles:b,processingFiles:m,isUploadStarted:d.length>0,isAllComplete:t===100&&c.length===r.length&&m.length===0,isAllErrored:!!s&&h.length===r.length,isAllPaused:n.length!==0&&u.length===n.length,isUploadInProgress:n.length>0,isSomeGhost:r.some(F=>F.isGhost)}}validateSingleFile(e){try{p(this,_)[_].validateSingleFile(e)}catch(t){return t.message}return null}validateAggregateRestrictions(e){const t=this.getFiles();try{p(this,_)[_].validateAggregateRestrictions(t,e)}catch(s){return s.message}return null}checkIfFileAlreadyExists(e){const{files:t}=this.getState();return!!(t[e]&&!t[e].isGhost)}addFile(e){p(this,we)[we](e);const{nextFilesState:t,validFilesToAdd:s,errors:r}=p(this,Fe)[Fe]([e]),n=r.filter(l=>l.isRestriction);if(p(this,B)[B](n),r.length>0)throw r[0];this.setState({files:t});const[o]=s;return this.emit("file-added",o),this.emit("files-added",s),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),p(this,je)[je](),o.id}addFiles(e){p(this,we)[we]();const{nextFilesState:t,validFilesToAdd:s,errors:r}=p(this,Fe)[Fe](e),n=r.filter(l=>l.isRestriction);p(this,B)[B](n);const o=r.filter(l=>!l.isRestriction);if(o.length>0){let l=`Multiple errors occurred while adding files:
`;if(o.forEach(d=>{l+=`
 * ${d.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:l},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(o,l);{const d=new Error(l);throw d.errors=o,d}}this.setState({files:t}),s.forEach(l=>{this.emit("file-added",l)}),this.emit("files-added",s),s.length>5?this.log(`Added batch of ${s.length} files`):Object.values(s).forEach(l=>{this.log(`Added file: ${l.name}
 id: ${l.id}
 type: ${l.type}`)}),s.length>0&&p(this,je)[je]()}removeFiles(e){const{files:t,currentUploads:s}=this.getState(),r={...t},n={...s},o=Object.create(null);e.forEach(c=>{t[c]&&(o[c]=t[c],delete r[c])});function l(c){return o[c]===void 0}Object.keys(n).forEach(c=>{const h=s[c].fileIDs.filter(l);if(h.length===0){delete n[c];return}const{capabilities:b}=this.getState();if(h.length!==s[c].fileIDs.length&&!b.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");n[c]={...s[c],fileIDs:h}});const d={currentUploads:n,files:r};Object.keys(r).length===0&&(d.allowNewUpload=!0,d.error=null,d.recoveredState=null),this.setState(d),this.calculateTotalProgress();const u=Object.keys(o);u.forEach(c=>{this.emit("file-removed",o[c])}),u.length>5?this.log(`Removed ${u.length} files`):this.log(`Removed files: ${u.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;const t=this.getFile(e),r=!(t.isPaused||!1);return this.setFileState(e,{isPaused:r}),this.emit("upload-pause",t,r),r}pauseAll(){const e={...this.getState().files};Object.keys(e).filter(s=>!e[s].progress.uploadComplete&&e[s].progress.uploadStarted).forEach(s=>{const r={...e[s],isPaused:!0};e[s]=r}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e={...this.getState().files};Object.keys(e).filter(s=>!e[s].progress.uploadComplete&&e[s].progress.uploadStarted).forEach(s=>{const r={...e[s],isPaused:!1,error:null};e[s]=r}),this.setState({files:e}),this.emit("resume-all")}retryAll(){const e={...this.getState().files},t=Object.keys(e).filter(r=>e[r].error);if(t.forEach(r=>{const n={...e[r],isPaused:!1,error:null};e[r]=n}),this.setState({files:e,error:null}),this.emit("retry-all",Object.values(e)),t.length===0)return Promise.resolve({successful:[],failed:[]});const s=p(this,J)[J](t,{forceAllowNewUpload:!0});return p(this,Z)[Z](s)}cancelAll(){this.emit("cancel-all");const{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t),this.setState(Ae)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));const t=p(this,J)[J]([e],{forceAllowNewUpload:!0});return p(this,Z)[Z](t)}logout(){this.iteratePlugins(e=>{var t;(t=e.provider)==null||t.logout==null||t.logout()})}calculateTotalProgress(){const t=this.getFiles().filter(u=>u.progress.uploadStarted||u.progress.preprocess||u.progress.postprocess);if(t.length===0){this.emit("progress",0),this.setState({totalProgress:0});return}const s=t.filter(u=>u.progress.bytesTotal!=null),r=t.filter(u=>u.progress.bytesTotal==null);if(s.length===0){const u=t.length*100,c=r.reduce((b,m)=>b+m.progress.percentage,0),h=Math.round(c/u*100);this.setState({totalProgress:h});return}let n=s.reduce((u,c)=>{var h;return u+((h=c.progress.bytesTotal)!=null?h:0)},0);const o=n/s.length;n+=o*r.length;let l=0;s.forEach(u=>{l+=u.progress.bytesUploaded}),r.forEach(u=>{l+=o*(u.progress.percentage||0)/100});let d=n===0?0:Math.round(l/n*100);d>100&&(d=100),this.setState({totalProgress:d}),this.emit("progress",d)}updateOnlineStatus(){var e;((e=window.navigator.onLine)!=null?e:!0)?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e){if(typeof e!="function"){const d=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(d)}for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];const n=new e(this,...s),o=n.id;if(!o)throw new Error("Your plugin must have an id");if(!n.type)throw new Error("Your plugin must have a type");const l=this.getPlugin(o);if(l){const d=`Already found a plugin named '${l.id}'. Tried to use: '${o}'.
Uppy plugins must have unique \`id\` options. See https://uppy.io/docs/plugins/#id.`;throw new Error(d)}return e.VERSION&&this.log(`Using ${o} v${e.VERSION}`),n.type in p(this,N)[N]?p(this,N)[N][n.type].push(n):p(this,N)[N][n.type]=[n],n.install(),this.emit("plugin-added",n),this}getPlugin(e){for(const t of Object.values(p(this,N)[N])){const s=t.find(r=>r.id===e);if(s!=null)return s}}[Symbol.for("uppy test: getPlugins")](e){return p(this,N)[N][e]}iteratePlugins(e){Object.values(p(this,N)[N]).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const t=p(this,N)[N][e.type],s=t.findIndex(o=>o.id===e.id);s!==-1&&t.splice(s,1);const n={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(n)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),p(this,xe)[xe](),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",p(this,H)[H]),window.removeEventListener("offline",p(this,H)[H]))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t,s){t===void 0&&(t="info"),s===void 0&&(s=3e3);const r=typeof e=="object";this.setState({info:[...this.getState().info,{type:t,message:r?e.message:e,details:r?e.details:null}]}),setTimeout(()=>this.hideInfo(),s),this.emit("info-visible")}log(e,t){const{logger:s}=this.opts;switch(t){case"error":s.error(e);break;case"warning":s.warn(e);break;default:s.debug(e);break}}registerRequestClient(e,t){p(this,Se)[Se].set(e,t)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);const t=p(this,Se)[Se].get(e.remote.requestClientId);if(t==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return t}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?p(this,Z)[Z](e):(p(this,he)[he](e),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](){return p(this,J)[J](...arguments)}addResultData(e,t){if(!p(this,Ke)[Ke](e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}const{currentUploads:s}=this.getState(),r={...s[e],result:{...s[e].result,...t}};this.setState({currentUploads:{...s,[e]:r}})}upload(){var e;(e=p(this,N)[N].uploader)!=null&&e.length||this.log("No uploader type plugins are used","warning");let{files:t}=this.getState();const s=this.opts.onBeforeUpload(t);return s===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(s&&typeof s=="object"&&(t=s,this.setState({files:t})),Promise.resolve().then(()=>p(this,_)[_].validateMinNumberOfFiles(t)).catch(r=>{throw p(this,B)[B]([r]),r}).then(()=>{if(!p(this,Ye)[Ye](t))throw new V(this.i18n("missingRequiredMetaField"))}).catch(r=>{throw r}).then(()=>{const{currentUploads:r}=this.getState(),n=Object.values(r).flatMap(d=>d.fileIDs),o=[];Object.keys(t).forEach(d=>{const u=this.getFile(d);!u.progress.uploadStarted&&n.indexOf(d)===-1&&o.push(u.id)});const l=p(this,J)[J](o);return p(this,Z)[Z](l)}).catch(r=>{throw this.emit("error",r),this.log(r,"error"),r}))}}function dr(i){for(const n of i)n.isRestriction?this.emit("restriction-failed",n.file,n):this.emit("error",n,n.file),this.log(n,"warning");const e=i.filter(n=>n.isUserFacing),t=4,s=e.slice(0,t),r=e.slice(t);s.forEach(n=>{let{message:o,details:l=""}=n;this.info({message:o,details:l},"error",this.opts.infoTimeout)}),r.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:r.length})})}function ur(i){const{missingFields:e,error:t}=p(this,_)[_].getMissingRequiredMetaFields(i);return e.length>0?(this.setFileState(i.id,{missingRequiredMetaFields:e}),this.log(t.message),this.emit("restriction-failed",i,t),!1):!0}function cr(i){let e=!0;for(const t of Object.values(i))p(this,qe)[qe](t)||(e=!1);return e}function pr(i){const{allowNewUpload:e}=this.getState();if(e===!1){const t=new V(this.i18n("noMoreFilesAllowed"),{file:i});throw p(this,B)[B]([t]),t}}function hr(i){const e=i instanceof File?{name:i.name,type:i.type,size:i.size,data:i}:i,t=Bt(e),s=Xs(t,e),r=zt(s).extension,n=Hs(e,this.getID()),o=e.meta||{};o.name=s,o.type=t;const l=Number.isFinite(e.data.size)?e.data.size:null;return{source:e.source||"",id:n,name:s,extension:r||"",meta:{...this.getState().meta,...o},type:t,data:e.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:l,uploadComplete:!1,uploadStarted:null},size:l,isGhost:!1,isRemote:e.isRemote||!1,remote:e.remote,preview:e.preview}}function fr(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(i=>{i.isRestriction||this.log(i.stack||i.message||i)})},4))}function mr(i){const{files:e}=this.getState(),t={...e},s=[],r=[];for(const l of i)try{var n;let d=p(this,st)[st](l);const u=(n=e[d.id])==null?void 0:n.isGhost;u&&(d={...e[d.id],isGhost:!1,data:l.data},this.log(`Replaced the blob in the restored ghost file: ${d.name}, ${d.id}`));const c=this.opts.onBeforeFileAdded(d,t);if(!c&&this.checkIfFileAlreadyExists(d.id)){var o;throw new V(this.i18n("noDuplicates",{fileName:(o=d.name)!=null?o:this.i18n("unnamed")}),{file:l})}if(c===!1&&!u)throw new V("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:l});typeof c=="object"&&c!==null&&(d=c),p(this,_)[_].validateSingleFile(d),t[d.id]=d,s.push(d)}catch(d){r.push(d)}try{p(this,_)[_].validateAggregateRestrictions(Object.values(e),s)}catch(l){return r.push(l),{nextFilesState:e,validFilesToAdd:[],errors:r}}return{nextFilesState:t,validFilesToAdd:s,errors:r}}function gr(){const i=(s,r,n)=>{let o=s.message||"Unknown error";s.details&&(o+=` ${s.details}`),this.setState({error:o}),r!=null&&r.id in this.getState().files&&this.setFileState(r.id,{error:o,response:n})};this.on("error",i),this.on("upload-error",(s,r,n)=>{if(i(r,s,n),typeof r=="object"&&r.message){var o;this.log(r.message,"error");const l=new Error(this.i18n("failedToUpload",{file:(o=s==null?void 0:s.name)!=null?o:""}));l.isUserFacing=!0,l.details=r.message,r.details&&(l.details+=` ${r.details}`),p(this,B)[B]([l])}else p(this,B)[B]([r])});let e=null;this.on("upload-stalled",(s,r)=>{const{message:n}=s,o=r.map(l=>l.meta.name).join(", ");e||(this.info({message:n,details:o},"warning",this.opts.infoTimeout),e=setTimeout(()=>{e=null},this.opts.infoTimeout)),this.log(`${n} ${o}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const t=s=>{const r=s.filter(o=>{const l=o!=null&&this.getFile(o.id);return l||this.log(`Not setting progress for a file that has been removed: ${o==null?void 0:o.id}`),l}),n=Object.fromEntries(r.map(o=>[o.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:o.size}}]));this.patchFilesState(n)};this.on("upload-start",t),this.on("upload-progress",this.calculateProgress),this.on("upload-success",(s,r)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const n=this.getFile(s.id).progress;this.setFileState(s.id,{progress:{...n,postprocess:p(this,ie)[ie].size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:n.bytesTotal},response:r,uploadURL:r.uploadURL,isPaused:!1}),s.size==null&&this.setFileState(s.id,{size:r.bytesUploaded||n.bytesTotal}),this.calculateTotalProgress()}),this.on("preprocess-progress",(s,r)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}this.setFileState(s.id,{progress:{...this.getFile(s.id).progress,preprocess:r}})}),this.on("preprocess-complete",s=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const r={...this.getState().files};r[s.id]={...r[s.id],progress:{...r[s.id].progress}},delete r[s.id].progress.preprocess,this.setState({files:r})}),this.on("postprocess-progress",(s,r)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}this.setFileState(s.id,{progress:{...this.getState().files[s.id].progress,postprocess:r}})}),this.on("postprocess-complete",s=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const r={...this.getState().files};r[s.id]={...r[s.id],progress:{...r[s.id].progress}},delete r[s.id].progress.postprocess,this.setState({files:r})}),this.on("restored",()=>{this.calculateTotalProgress()}),this.on("dashboard:file-edit-complete",s=>{s&&p(this,qe)[qe](s)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",p(this,H)[H]),window.addEventListener("offline",p(this,H)[H]),setTimeout(p(this,H)[H],3e3))}function yr(i,e){e===void 0&&(e={});const{forceAllowNewUpload:t=!1}=e,{allowNewUpload:s,currentUploads:r}=this.getState();if(!s&&!t)throw new Error("Cannot create a new upload: already uploading.");const n=ns();return this.emit("upload",n,this.getFilesByIds(i)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...r,[n]:{fileIDs:i,step:0,result:{}}}}),n}function br(i){const{currentUploads:e}=this.getState();return e[i]}function vr(i){const e={...this.getState().currentUploads};delete e[i],this.setState({currentUploads:e})}async function xr(i){const e=()=>{const{currentUploads:n}=this.getState();return n[i]};let t=e();const s=[...p(this,ce)[ce],...p(this,pe)[pe],...p(this,ie)[ie]];try{for(let n=t.step||0;n<s.length&&t;n++){const o=s[n];this.setState({currentUploads:{...this.getState().currentUploads,[i]:{...t,step:n}}});const{fileIDs:l}=t;await o(l,i),t=e()}}catch(n){throw p(this,he)[he](i),n}if(t){t.fileIDs.forEach(d=>{const u=this.getFile(d);u&&u.progress.postprocess&&this.emit("postprocess-complete",u)});const n=t.fileIDs.map(d=>this.getFile(d)),o=n.filter(d=>!d.error),l=n.filter(d=>d.error);this.addResultData(i,{successful:o,failed:l,uploadID:i}),t=e()}let r;return t&&(r=t.result,this.emit("complete",r),p(this,he)[he](i)),r==null&&this.log(`Not setting result for an upload that has been removed: ${i}`),r}Be.VERSION=lr.version;class wr{constructor(e,t){this.uppy=e,this.opts=t??{}}getPluginState(){const{plugins:e}=this.uppy.getState();return(e==null?void 0:e[this.id])||{}}setPluginState(e){const{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:{...t,[this.id]:{...t[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const e=new Mt([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}}function Q(i,e){if(!{}.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var jr=0;function Wt(i){return"__private_"+jr+++"_"+i}var R=Wt("uppy"),Pe=Wt("events");class Fr{constructor(e){Object.defineProperty(this,R,{writable:!0,value:void 0}),Object.defineProperty(this,Pe,{writable:!0,value:[]}),Q(this,R)[R]=e}on(e,t){return Q(this,Pe)[Pe].push([e,t]),Q(this,R)[R].on(e,t)}remove(){for(const[e,t]of Q(this,Pe)[Pe].splice(0))Q(this,R)[R].off(e,t)}onFilePause(e,t){this.on("upload-pause",(s,r)=>{e===(s==null?void 0:s.id)&&t(r)})}onFileRemove(e,t){this.on("file-removed",s=>{e===s.id&&t(s.id)})}onPause(e,t){this.on("upload-pause",(s,r)=>{e===(s==null?void 0:s.id)&&t(r)})}onRetry(e,t){this.on("upload-retry",s=>{e===(s==null?void 0:s.id)&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{Q(this,R)[R].getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{Q(this,R)[R].getFile(e)&&t()})}onCancelAll(e,t){var s=this;this.on("cancel-all",function(){Q(s,R)[R].getFile(e)&&t(...arguments)})}onResumeAll(e,t){this.on("resume-all",()=>{Q(this,R)[R].getFile(e)&&t()})}}function y(i,e){if(!{}.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var Sr=0;function $(i){return"__private_"+Sr+++"_"+i}function Pr(i){return new Error("Cancelled",{cause:i})}function jt(i){if(i!=null){var e;const t=()=>this.abort(i.reason);i.addEventListener("abort",t,{once:!0});const s=()=>{i.removeEventListener("abort",t)};(e=this.then)==null||e.call(this,s,s)}return this}var z=$("activeRequests"),L=$("queuedHandlers"),I=$("paused"),ne=$("pauseTimer"),k=$("downLimit"),oe=$("upperLimit"),ee=$("rateLimitingTimer"),Ce=$("call"),se=$("queueNext"),rt=$("next"),Je=$("queue"),nt=$("dequeue"),Ze=$("resume"),ae=$("increaseLimit");class Tr{constructor(e){Object.defineProperty(this,nt,{value:Nr}),Object.defineProperty(this,Je,{value:qr}),Object.defineProperty(this,rt,{value:Cr}),Object.defineProperty(this,se,{value:Or}),Object.defineProperty(this,Ce,{value:Er}),Object.defineProperty(this,z,{writable:!0,value:0}),Object.defineProperty(this,L,{writable:!0,value:[]}),Object.defineProperty(this,I,{writable:!0,value:!1}),Object.defineProperty(this,ne,{writable:!0,value:void 0}),Object.defineProperty(this,k,{writable:!0,value:1}),Object.defineProperty(this,oe,{writable:!0,value:void 0}),Object.defineProperty(this,ee,{writable:!0,value:void 0}),Object.defineProperty(this,Ze,{writable:!0,value:()=>this.resume()}),Object.defineProperty(this,ae,{writable:!0,value:()=>{if(y(this,I)[I]){y(this,ee)[ee]=setTimeout(y(this,ae)[ae],0);return}y(this,k)[k]=this.limit,this.limit=Math.ceil((y(this,oe)[oe]+y(this,k)[k])/2);for(let t=y(this,k)[k];t<=this.limit;t++)y(this,se)[se]();y(this,oe)[oe]-y(this,k)[k]>3?y(this,ee)[ee]=setTimeout(y(this,ae)[ae],2e3):y(this,k)[k]=Math.floor(y(this,k)[k]/2)}}),typeof e!="number"||e===0?this.limit=1/0:this.limit=e}run(e,t){return!y(this,I)[I]&&y(this,z)[z]<this.limit?y(this,Ce)[Ce](e):y(this,Je)[Je](e,t)}wrapSyncFunction(e,t){var s=this;return function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];const l=s.run(()=>(e(...n),queueMicrotask(()=>l.done()),()=>{}),t);return{abortOn:jt,abort(){l.abort()}}}}wrapPromiseFunction(e,t){var s=this;return function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];let l;const d=new Promise((u,c)=>{l=s.run(()=>{let h,b;try{b=Promise.resolve(e(...n))}catch(m){b=Promise.reject(m)}return b.then(m=>{h?c(h):(l.done(),u(m))},m=>{h?c(h):(l.done(),c(m))}),m=>{h=Pr(m)}},t)});return d.abort=u=>{l.abort(u)},d.abortOn=jt,d}}resume(){y(this,I)[I]=!1,clearTimeout(y(this,ne)[ne]);for(let e=0;e<this.limit;e++)y(this,se)[se]()}pause(e){e===void 0&&(e=null),y(this,I)[I]=!0,clearTimeout(y(this,ne)[ne]),e!=null&&(y(this,ne)[ne]=setTimeout(y(this,Ze)[Ze],e))}rateLimit(e){clearTimeout(y(this,ee)[ee]),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(y(this,oe)[oe]=this.limit-1,this.limit=y(this,k)[k],y(this,ee)[ee]=setTimeout(y(this,ae)[ae],e))}get isPaused(){return y(this,I)[I]}}function Er(i){y(this,z)[z]+=1;let e=!1,t;try{t=i()}catch(s){throw y(this,z)[z]-=1,s}return{abort:s=>{e||(e=!0,y(this,z)[z]-=1,t==null||t(s),y(this,se)[se]())},done:()=>{e||(e=!0,y(this,z)[z]-=1,y(this,se)[se]())}}}function Or(){queueMicrotask(()=>y(this,rt)[rt]())}function Cr(){if(y(this,I)[I]||y(this,z)[z]>=this.limit||y(this,L)[L].length===0)return;const i=y(this,L)[L].shift();if(i==null)throw new Error("Invariant violation: next is null");const e=y(this,Ce)[Ce](i.fn);i.abort=e.abort,i.done=e.done}function qr(i,e){const t={fn:i,priority:(e==null?void 0:e.priority)||0,abort:()=>{y(this,nt)[nt](t)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},s=y(this,L)[L].findIndex(r=>t.priority>r.priority);return s===-1?y(this,L)[L].push(t):y(this,L)[L].splice(s,0,t),t}function Nr(i){const e=y(this,L)[L].indexOf(i);e!==-1&&y(this,L)[L].splice(e,1)}const Qe=Symbol("__queue");class $e extends Error{constructor(e,t){t===void 0&&(t=null),super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=t}}function Ur(i){return i?i.readyState!==0&&i.readyState!==4||i.status===0:!1}function W(i,e){if(!{}.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var Ar=0;function De(i){return"__private_"+Ar+++"_"+i}var te=De("aliveTimer"),le=De("isDone"),Te=De("onTimedOut"),de=De("timeout");class Rr{constructor(e,t){Object.defineProperty(this,te,{writable:!0,value:void 0}),Object.defineProperty(this,le,{writable:!0,value:!1}),Object.defineProperty(this,Te,{writable:!0,value:void 0}),Object.defineProperty(this,de,{writable:!0,value:void 0}),W(this,de)[de]=e,W(this,Te)[Te]=()=>t(e)}progress(){W(this,le)[le]||W(this,de)[de]>0&&(clearTimeout(W(this,te)[te]),W(this,te)[te]=setTimeout(W(this,Te)[Te],W(this,de)[de]))}done(){W(this,le)[le]||(clearTimeout(W(this,te)[te]),W(this,te)[te]=void 0,W(this,le)[le]=!0)}}const Re=()=>{};function kr(i,e){e===void 0&&(e={});const{body:t=null,headers:s={},method:r="GET",onBeforeRequest:n=Re,onUploadProgress:o=Re,shouldRetry:l=()=>!0,onAfterResponse:d=Re,onTimeout:u=Re,responseType:c,retries:h=3,signal:b=null,timeout:m=3e4,withCredentials:F=!1}=e,j=S=>.3*2**(S-1)*1e3,U=new Rr(m,u);function q(S){return S===void 0&&(S=0),new Promise(async(v,w)=>{const g=new XMLHttpRequest;g.open(r,i,!0),g.withCredentials=F,c&&(g.responseType=c),b==null||b.addEventListener("abort",()=>{g.abort(),w(new DOMException("Aborted","AbortError"))}),g.onload=async()=>{await d(g,S),g.status>=200&&g.status<300?(U.done(),v(g)):l(g)&&S<h?setTimeout(()=>{q(S+1).then(v,w)},j(S)):(U.done(),w(new $e(g.statusText,g)))},g.onerror=()=>{l(g)&&S<h?setTimeout(()=>{q(S+1).then(v,w)},j(S)):(U.done(),w(new $e(g.statusText,g)))},g.upload.onprogress=f=>{U.progress(),o(f)},s&&Object.keys(s).forEach(f=>{g.setRequestHeader(f,s[f])}),await n(g,S),g.send(t)})}return q()}function _r(i){const e=t=>"error"in t&&!!t.error;return i.filter(t=>!e(t))}function Lr(i){return i.filter(e=>{var t;return!((t=e.progress)!=null&&t.uploadStarted)||!e.isRestored})}function Gt(i,e){return i===!0?Object.keys(e):Array.isArray(i)?i:[]}const Mr={strings:{uploadStalled:"Upload has not made any progress for %{seconds} seconds. You may want to retry it."}};function re(i,e){if(!{}.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var $r=0;function ye(i){return"__private_"+$r+++"_"+i}const Ir={version:"4.0.2"};function zr(i,e){let t=e;return t||(t=new Error("Upload error")),typeof t=="string"&&(t=new Error(t)),t instanceof Error||(t=Object.assign(new Error("Upload error"),{data:t})),Ur(i)?(t=new $e(t,i),t):(t.request=i,t)}function Ft(i){return i.data.slice(0,i.data.size,i.meta.type)}const Br={formData:!0,fieldName:"file",method:"post",allowedMetaFields:!0,bundle:!1,headers:{},timeout:30*1e3,limit:5,withCredentials:!1,responseType:""};var fe=ye("getFetcher"),ot=ye("uploadLocalFile"),et=ye("uploadBundle"),at=ye("getCompanionClientArgs"),tt=ye("uploadFiles"),Ee=ye("handleUpload");class Vt extends wr{constructor(e,t){if(super(e,{...Br,fieldName:t.bundle?"files[]":"file",...t}),Object.defineProperty(this,tt,{value:Vr}),Object.defineProperty(this,at,{value:Gr}),Object.defineProperty(this,et,{value:Wr}),Object.defineProperty(this,ot,{value:Dr}),Object.defineProperty(this,fe,{writable:!0,value:void 0}),Object.defineProperty(this,Ee,{writable:!0,value:async s=>{if(s.length===0){this.uppy.log("[XHRUpload] No files to upload!");return}this.opts.limit===0&&!this.opts[Qe]&&this.uppy.log("[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0","warning"),this.uppy.log("[XHRUpload] Uploading...");const r=this.uppy.getFilesByIds(s),n=_r(r),o=Lr(n);if(this.uppy.emit("upload-start",o),this.opts.bundle){if(n.some(d=>d.isRemote))throw new Error("Can’t upload remote files when the `bundle: true` option is set");if(typeof this.opts.headers=="function")throw new TypeError("`headers` may not be a function when the `bundle: true` option is set");await re(this,et)[et](n)}else await re(this,tt)[tt](n)}}),this.type="uploader",this.id=this.opts.id||"XHRUpload",this.defaultLocale=Mr,this.i18nInit(),Qe in this.opts?this.requests=this.opts[Qe]:this.requests=new Tr(this.opts.limit),this.opts.bundle&&!this.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");if(this.opts.bundle&&typeof this.opts.headers=="function")throw new Error("`opts.headers` can not be a function when the `bundle: true` option is set.");if((t==null?void 0:t.allowedMetaFields)===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");this.uploaderEvents=Object.create(null),re(this,fe)[fe]=s=>async(r,n)=>{try{var o,l,d;const c=await kr(r,{...n,onBeforeRequest:this.opts.onBeforeRequest,shouldRetry:this.opts.shouldRetry,onAfterResponse:this.opts.onAfterResponse,onTimeout:m=>{const F=Math.ceil(m/1e3),j=new Error(this.i18n("uploadStalled",{seconds:F}));this.uppy.emit("upload-stalled",j,s)},onUploadProgress:m=>{if(m.lengthComputable)for(const j of s){var F;this.uppy.emit("upload-progress",j,{uploadStarted:(F=j.progress.uploadStarted)!=null?F:0,bytesUploaded:m.loaded/m.total*j.size,bytesTotal:j.size})}}});let h=await((o=(l=this.opts).getResponseData)==null?void 0:o.call(l,c));try{var u;(u=h)!=null||(h=JSON.parse(c.responseText))}catch(m){throw new Error("@uppy/xhr-upload expects a JSON response (with a `url` property). To parse non-JSON responses, use `getResponseData` to turn your response into JSON.",{cause:m})}const b=typeof((d=h)==null?void 0:d.url)=="string"?h.url:void 0;for(const m of s)this.uppy.emit("upload-success",m,{status:c.status,body:h,uploadURL:b});return c}catch(c){if(c.name==="AbortError")return;if(c instanceof $e){const h=c.request;for(const b of s)this.uppy.emit("upload-error",b,zr(h,c))}throw c}}}getOptions(e){const t=this.uppy.getState().xhrUpload,{headers:s}=this.opts,r={...this.opts,...t||{},...e.xhrUpload||{},headers:{}};return typeof s=="function"?r.headers=s(e):Object.assign(r.headers,this.opts.headers),t&&Object.assign(r.headers,t.headers),e.xhrUpload&&Object.assign(r.headers,e.xhrUpload.headers),r}addMetadata(e,t,s){Gt(s.allowedMetaFields,t).forEach(n=>{const o=t[n];Array.isArray(o)?o.forEach(l=>e.append(n,l)):e.append(n,o)})}createFormDataUpload(e,t){const s=new FormData;this.addMetadata(s,e.meta,t);const r=Ft(e);return e.name?s.append(t.fieldName,r,e.meta.name):s.append(t.fieldName,r),s}createBundledUpload(e,t){const s=new FormData,{meta:r}=this.uppy.getState();return this.addMetadata(s,r,t),e.forEach(n=>{const o=this.getOptions(n),l=Ft(n);n.name?s.append(o.fieldName,l,n.name):s.append(o.fieldName,l)}),s}install(){if(this.opts.bundle){const{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!1}})}this.uppy.addUploader(re(this,Ee)[Ee])}uninstall(){if(this.opts.bundle){const{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!0}})}this.uppy.removeUploader(re(this,Ee)[Ee])}}async function Dr(i){const e=new Fr(this.uppy),t=new AbortController,s=this.requests.wrapPromiseFunction(async()=>{const r=this.getOptions(i),n=re(this,fe)[fe]([i]),o=r.formData?this.createFormDataUpload(i,r):i.data;return n(r.endpoint,{...r,body:o,signal:t.signal})});e.onFileRemove(i.id,()=>t.abort()),e.onCancelAll(i.id,()=>{t.abort()});try{await s().abortOn(t.signal)}catch(r){if(r.message!=="Cancelled")throw r}finally{e.remove()}}async function Wr(i){const e=new AbortController,t=this.requests.wrapPromiseFunction(async()=>{var r;const n=(r=this.uppy.getState().xhrUpload)!=null?r:{},o=re(this,fe)[fe](i),l=this.createBundledUpload(i,{...this.opts,...n});return o(this.opts.endpoint,{...this.opts,body:l,signal:e.signal})});function s(){e.abort()}this.uppy.once("cancel-all",s);try{await t().abortOn(e.signal)}catch(r){if(r.message!=="Cancelled")throw r}finally{this.uppy.off("cancel-all",s)}}function Gr(i){var e;const t=this.getOptions(i),s=Gt(t.allowedMetaFields,i.meta);return{...(e=i.remote)==null?void 0:e.body,protocol:"multipart",endpoint:t.endpoint,size:i.data.size,fieldname:t.fieldName,metadata:Object.fromEntries(s.map(r=>[r,i.meta[r]])),httpMethod:t.method,useFormData:t.formData,headers:t.headers}}async function Vr(i){await Promise.allSettled(i.map(e=>{if(e.isRemote){const t=()=>this.requests,s=new AbortController,r=o=>{o.id===e.id&&s.abort()};this.uppy.on("file-removed",r);const n=this.uppy.getRequestClientForFile(e).uploadRemoteFile(e,re(this,at)[at](e),{signal:s.signal,getQueue:t});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",r)},{priority:-1})(),n}return re(this,ot)[ot](e)}))}Vt.VERSION=Ir.version;function Hr({onFileAdd:i,onComplete:e,onError:t}={}){const[s]=x.useState(()=>new Be({autoProceed:!1,restrictions:{maxFileSize:10485760,allowedFileTypes:[".png",".jpg",".jpeg",".pdf",".txt",".doc",".docx"]}})),[r,n]=x.useState(!1);x.useEffect(()=>(s.use(Vt,{endpoint:""}),i&&s.on("file-added",l=>{n(!0),i(l)}),e&&s.on("complete",l=>{n(!1),e(l)}),t&&(s.on("error",l=>{n(!1),t(l)}),s.on("restriction-failed",(l,d)=>{n(!1),t(d)})),()=>s.destroy()),[s,i,e,t]);const o=x.useCallback(function(d){Object.values(d).map(u=>s.addFile({source:"input",name:u.name,type:u.type,data:u})),d.length&&n(!0)},[s,n]);return{isUploading:r,handleFiles:o,uppy:s}}const Yr=({handleFiles:i})=>{const e=x.useRef(null);return a.jsxs(qt,{handleFiles:i,className:"rounded-2xl border-solid border-brand-main",children:[a.jsx("input",{id:"drop-input",ref:e,className:"sr-only",type:"file",onChange:s}),a.jsx(Ie,{children:a.jsx(X,{"aria-label":"Upload document",className:"w-full rounded-none",onClick:t,variant:"link",children:a.jsxs("div",{className:"grid place-items-center px-large py-base",children:[a.jsx("div",{className:"pb-small",children:a.jsx(ge,{display:"uploadCloud",className:"text-brand-main",size:32})}),a.jsx(E,{fontFamily:"raleway",fontWeight:"bold",size:"sm",children:"Click to upload or drag and drop"}),a.jsx(E,{color:"tertiary",size:"xs",children:"PNG, JPG, PDF, TXT, DOC, DOCX (max 10Mb)"})]})})})]});function t(){var r;(r=e.current)==null||r.click()}function s(r){r.target.files&&i(r.target.files)}},Xr=["image/png","image/jpeg","application/pdf","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],Kr={"image/png":"png","image/jpeg":"jpg","application/pdf":"pdf","text/plain":"txt","application/msword":"doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx"};function Jr(i){if(Xr.includes(i))return Kr[i]}const Zr=({documents:i,onDelete:e,recordType:t})=>{const[s,r]=x.useState(),{isUploading:n,handleFiles:o}=Hr({onFileAdd:l=>{r(l)}});return a.jsxs("div",{className:"grid gap-large",children:[a.jsx(E,{color:"tertiary",size:"sm",children:`View, download and manage all ${t} records.`}),a.jsx("div",{className:"grid gap-small",children:i.map(l=>a.jsx(Oe,{onDelete:e,record:l},l.fileName))}),a.jsx(E,{color:"primary",size:"base",fontWeight:"bold",children:"Upload and attach files"}),a.jsx(Yr,{handleFiles:o}),n&&(s==null?void 0:s.name)&&a.jsx(Oe,{record:{fileName:s.name,fileType:Jr(s.type)},isUploadingFile:n})]})},Qr=()=>{return a.jsx("div",{className:"w-[400px]",children:a.jsx(Zr,{documents:e(),onDelete:i,recordType:"medical"})});function i(){}function e(){return[{fileName:"Test record doc",fileType:"doc"},{fileName:"Test record docx",fileType:"docx"},{fileName:"Test record jpg",fileType:"jpg"},{fileName:"Test record pdf",fileType:"pdf"},{fileName:"Test record txt",fileType:"txt"},{fileName:"Test record png",fileType:"png"}]}},en=()=>{const i=[{key:"date",width:"100px",label:"Date"},{key:"status",width:"200px",label:"Status"},{key:"id",width:"300px",label:"ID"},{key:"note",label:"Note"}],e=[{data:{date:"17/04/2023",status:"Reported Missing",id:"87428473698273hghw3874928472hwek3y2",note:"Informed by owner"},key:"1",isSelectable:!1},{data:{date:"11/11/2012",status:"Found Pet",id:"87428473698273hghw3874928472hwek3y2",note:"Rescued by stranger"},key:"2",isSelectable:!1},{data:{date:"31/08/2024",status:"Reported Missing",id:"87428473698273hghw3874928472hwek3y2",note:"Informed by owner"},key:"3",isSelectable:!1}];return a.jsx("div",{className:"",children:a.jsx(_t,{columns:i,rows:e})})},tn=()=>{const i=[{key:"date",width:"100px"},{key:"status",width:"200px"},{key:"id",width:"300px"},{key:"note"}],e=[{data:{date:"17/04/2023",status:"Reported Missing",id:"87428473698273hghw3874928472hwek3y2",note:"Informed by owner"},key:"1",isSelectable:!1},{data:{date:"11/11/2012",status:"Found Pet",id:"87428473698273hghw3874928472hwek3y2",note:"Rescued by stranger"},key:"2",isSelectable:!1},{data:{date:"31/08/2024",status:"Reported Missing",id:"87428473698273hghw3874928472hwek3y2",note:"Informed by owner"},key:"3",isSelectable:!1}];return a.jsx("div",{className:"",children:a.jsx(_t,{columns:i,rows:e})})},sn=()=>a.jsxs("div",{className:"flex flex-col gap-xlarge",children:[a.jsxs("div",{children:[a.jsx(it,{level:"h2",children:"Simple table"}),a.jsx(en,{})]}),a.jsxs("div",{children:[a.jsx(it,{level:"h2",children:"Table without header"}),a.jsx(tn,{})]})]}),rn=()=>a.jsxs(a.Fragment,{children:[a.jsx(E,{children:"A default text"}),a.jsx(E,{fontFamily:"raleway",children:"Raleway font-family text"}),a.jsx(E,{fontWeight:"bold",children:"Text with bold weight"})]}),Ht=Object.freeze(Object.defineProperty({__proto__:null,ButtonPlayground:Wi,CollapsePlayground:Gi,DialogPlayground:Vi,DragAndDropZonePlayground:Hi,FormBuilderPlayground:Yi,PetAlertMessagePlayground:Xi,PetCardRecordPlayground:Ji,PetDocumentsViewPlayground:Qr,TablePlayground:sn,TextPlayground:rn},Symbol.toStringTag,{value:"Module"})),St=Object.keys(Ht),Pt="display",an=()=>{const[i,e]=xi(),t=i.get(Pt)??St[0],s=Ht[t];return a.jsxs("div",{className:"flex min-h-screen w-full",children:[a.jsx("div",{className:"flex flex-col gap-small border-r-[1px] border-r-border-secondary p-base",children:St.map(r)}),a.jsx("div",{className:"flex min-h-full w-full flex-col gap-base p-base",children:a.jsx(s,{})})]});function r(o){const l=o===t;return a.jsx(X,{className:"h-6 text-sm",fullWidth:!0,onClick:n(o),variant:l?"primary":"secondary",children:o.replace("Playground","")},o)}function n(o){return()=>{e({[Pt]:o})}}};export{an as default};
